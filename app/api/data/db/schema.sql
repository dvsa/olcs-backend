-- MySQL Script generated by MySQL Workbench
-- 08/27/14 12:22:32
-- Model: New Model    Version: 1.0
SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema olcs
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Table `ref_data`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ref_data` (
  `id` VARCHAR(32) NOT NULL,
  `description` VARCHAR(512) NULL,
  `ref_data_category_id` VARCHAR(32) NOT NULL,
  `olbs_key` VARCHAR(20) NULL,
  `parent_id` VARCHAR(32) NULL,
  `display_order` INTEGER NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_ref_data_ref_data1_idx` (`parent_id` ASC),
  CONSTRAINT `fk_ref_data_ref_data1`
    FOREIGN KEY (`parent_id`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `organisation`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `organisation` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `company_or_llp_no` VARCHAR(20) NULL,
  `name` VARCHAR(160) NULL,
  `irfo_name` VARCHAR(160) NULL COMMENT 'Hold irfo company name separate from normal name.  Dont want changes to one affecting other on licences.',
  `type` VARCHAR(32) NOT NULL,
  `sic_code` VARCHAR(32) NULL,
  `vi_action` VARCHAR(1) NULL,
  `is_mlh` TINYINT(1) NOT NULL DEFAULT 0,
  `company_cert_seen` TINYINT(1) NOT NULL DEFAULT 0,
  `irfo_nationality` VARCHAR(45) NULL,
  `is_irfo` TINYINT(1) NOT NULL DEFAULT 0,
  `allow_email` TINYINT(1) NOT NULL DEFAULT 0,
  `lead_tc_area_id` CHAR(1) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `last_modified_on` DATETIME NULL,
  `created_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_organisation_user1_idx` (`created_by` ASC),
  INDEX `fk_organisation_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_organisation_ref_data1_idx` (`type` ASC),
  INDEX `fk_organisation_ref_data2_idx` (`sic_code` ASC),
  INDEX `fk_organisation_traffic_area1_idx` (`lead_tc_area_id` ASC),
  INDEX `organisation_name_idx` (`name` ASC),
  CONSTRAINT `fk_organisation_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_organisation_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_organisation_ref_data1`
    FOREIGN KEY (`type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_organisation_ref_data2`
    FOREIGN KEY (`sic_code`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_organisation_traffic_area1`
    FOREIGN KEY (`lead_tc_area_id`)
    REFERENCES `traffic_area` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `person`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `person` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `forename` VARCHAR(35) NULL,
  `family_name` VARCHAR(35) NULL,
  `birth_date` DATE NULL,
  `birth_place` VARCHAR(35) NULL,
  `other_name` VARCHAR(35) NULL,
  `title` VARCHAR(32) NULL,
  `title_other` VARCHAR(20) NULL COMMENT 'Populated it title is other in dropdown',
  `deleted_date` DATETIME NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_person_user1_idx` (`created_by` ASC),
  INDEX `fk_person_user2_idx` (`last_modified_by` ASC),
  INDEX `person_family_name_idx` (`family_name` ASC),
  INDEX `person_forename_idx` (`forename` ASC),
  CONSTRAINT `fk_person_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_person_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `country`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `country` (
  `id` VARCHAR(8) NOT NULL,
  `country_desc` VARCHAR(200) NULL,
  `is_member_state` TINYINT(1) NOT NULL DEFAULT 0,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_country_user1_idx` (`created_by` ASC),
  INDEX `fk_country_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_country_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_country_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `admin_area_traffic_area`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `admin_area_traffic_area` (
  `id` CHAR(40) NOT NULL COMMENT 'Admin area used to link local auth from address service to traffic area',
  `traffic_area_id` VARCHAR(1) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_admin_area_traffic_area_traffic_area1_idx` (`traffic_area_id` ASC),
  INDEX `fk_admin_area_traffic_area_user1_idx` (`created_by` ASC),
  INDEX `fk_admin_area_traffic_area_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_admin_area_traffic_area_traffic_area1`
    FOREIGN KEY (`traffic_area_id`)
    REFERENCES `traffic_area` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_admin_area_traffic_area_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_admin_area_traffic_area_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `address`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `address` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `uprn` BIGINT NULL,
  `paon_start` VARCHAR(5) NULL,
  `paon_end` VARCHAR(5) NULL,
  `paon_desc` VARCHAR(90) NULL,
  `saon_start` VARCHAR(5) NULL,
  `saon_end` VARCHAR(5) NULL,
  `saon_desc` VARCHAR(90) NULL,
  `street` VARCHAR(100) NULL,
  `locality` VARCHAR(35) NULL,
  `town` VARCHAR(30) NULL,
  `postcode` VARCHAR(8) NULL,
  `admin_area` CHAR(40) NULL,
  `country_code` VARCHAR(8) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_address_country1_idx` (`country_code` ASC),
  INDEX `fk_address_user1_idx` (`created_by` ASC),
  INDEX `fk_address_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_address_admin_area_traffic_area1_idx` (`admin_area` ASC),
  CONSTRAINT `fk_address_country1`
    FOREIGN KEY (`country_code`)
    REFERENCES `country` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_address_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_address_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_address_admin_area_traffic_area1`
    FOREIGN KEY (`admin_area`)
    REFERENCES `admin_area_traffic_area` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `contact_details`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `contact_details` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `contact_type` VARCHAR(32) NOT NULL,
  `email_address` VARCHAR(60) NULL,
  `fao` VARCHAR(90) NULL,
  `description` VARCHAR(255) NULL,
  `licence_id` INT NULL,
  `organisation_id` INT NULL,
  `address_id` INT NULL,
  `person_id` INT NULL,
  `forename` VARCHAR(40) NULL,
  `family_name` VARCHAR(40) NULL,
  `written_permission_to_engage` TINYINT(1) NOT NULL DEFAULT 0,
  `deleted_date` DATETIME NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_contact_details_licence1_idx` (`licence_id` ASC),
  INDEX `fk_contact_details_organisation1_idx` (`organisation_id` ASC),
  INDEX `fk_contact_details_person1_idx` (`person_id` ASC),
  INDEX `fk_contact_details_address1_idx` (`address_id` ASC),
  INDEX `fk_contact_details_user1_idx` (`created_by` ASC),
  INDEX `fk_contact_details_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_contact_details_ref_data1_idx` (`contact_type` ASC),
  CONSTRAINT `fk_contact_details_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_contact_details_organisation1`
    FOREIGN KEY (`organisation_id`)
    REFERENCES `organisation` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_contact_details_person1`
    FOREIGN KEY (`person_id`)
    REFERENCES `person` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_contact_details_address1`
    FOREIGN KEY (`address_id`)
    REFERENCES `address` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_contact_details_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_contact_details_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_contact_details_ref_data1`
    FOREIGN KEY (`contact_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `traffic_area`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `traffic_area` (
  `id` CHAR(1) NOT NULL,
  `name` VARCHAR(70) NOT NULL,
  `txc_name` VARCHAR(70) NULL,
  `contact_details_id` INT NOT NULL,
  `is_scottish_rules` TINYINT(1) NOT NULL DEFAULT 0,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_traffic_area_user1_idx` (`created_by` ASC),
  INDEX `fk_traffic_area_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_traffic_area_contact_details1_idx` (`contact_details_id` ASC),
  CONSTRAINT `fk_traffic_area_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_traffic_area_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_traffic_area_contact_details1`
    FOREIGN KEY (`contact_details_id`)
    REFERENCES `contact_details` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `team`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `team` (
  `id` INT NOT NULL,
  `traffic_area_id` VARCHAR(1) NOT NULL,
  `override_ta_contact_id` INT NULL,
  `description` VARCHAR(255) NULL,
  `name` VARCHAR(70) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_team_traffic_area1_idx` (`traffic_area_id` ASC),
  INDEX `fk_team_user1_idx` (`created_by` ASC),
  INDEX `fk_team_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_team_contact_details1_idx` (`override_ta_contact_id` ASC),
  CONSTRAINT `fk_team_traffic_area1`
    FOREIGN KEY (`traffic_area_id`)
    REFERENCES `traffic_area` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_team_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_team_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_team_contact_details1`
    FOREIGN KEY (`override_ta_contact_id`)
    REFERENCES `contact_details` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `local_authority`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `local_authority` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `description` VARCHAR(255) NOT NULL,
  `email_address` VARCHAR(45) NULL,
  `txc_name` VARCHAR(255) NULL,
  `naptan_code` CHAR(3) NULL,
  `traffic_area_id` VARCHAR(1) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_local_authority_user1_idx` (`created_by` ASC),
  INDEX `fk_local_authority_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_local_authority_traffic_area1_idx` (`traffic_area_id` ASC),
  CONSTRAINT `fk_local_authority_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_local_authority_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_local_authority_traffic_area1`
    FOREIGN KEY (`traffic_area_id`)
    REFERENCES `traffic_area` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `transport_manager`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `transport_manager` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `tm_status` VARCHAR(32) NOT NULL,
  `tm_type` VARCHAR(32) NOT NULL,
  `contact_details_id` INT NOT NULL,
  `disqualification_tm_case_id` INT NULL,
  `deleted_date` DATETIME NULL,
  `nysiis_family_name` VARCHAR(100) NULL,
  `nysiis_forename` VARCHAR(100) NULL,
  `notes` VARCHAR(4000) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_transport_manager_ref_data1_idx` (`tm_status` ASC),
  INDEX `fk_transport_manager_ref_data2_idx` (`tm_type` ASC),
  INDEX `fk_transport_manager_contact_details1_idx` (`contact_details_id` ASC),
  INDEX `fk_transport_manager_user1_idx` (`created_by` ASC),
  INDEX `fk_transport_manager_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_transport_manager_ref_data1`
    FOREIGN KEY (`tm_status`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_transport_manager_ref_data2`
    FOREIGN KEY (`tm_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_transport_manager_contact_details1`
    FOREIGN KEY (`contact_details_id`)
    REFERENCES `contact_details` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_transport_manager_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_transport_manager_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `user`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `user` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `email_address` VARCHAR(45) NULL,
  `pid` INT(11) NULL,
  `name` VARCHAR(100) NULL,
  `team_id` INT NOT NULL,
  `account_disabled` TINYINT(1) NOT NULL DEFAULT 0,
  `deleted_date` DATETIME NULL,
  `local_authority_id` INT NULL,
  `contact_details_id` INT NULL,
  `partner_contact_details_id` INT NULL,
  `transport_manager_id` INT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 0,
  `job_title` VARCHAR(100) NULL,
  `division_group` VARCHAR(100) NULL,
  `department_name` VARCHAR(100) NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_user_team1_idx` (`team_id` ASC),
  INDEX `fk_user_local_authority1_idx` (`local_authority_id` ASC),
  INDEX `fk_user_user1_idx` (`created_by` ASC),
  INDEX `fk_user_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_user_contact_details1_idx` (`contact_details_id` ASC),
  INDEX `fk_user_contact_details2_idx` (`partner_contact_details_id` ASC),
  INDEX `fk_user_transport_manager1_idx` (`transport_manager_id` ASC),
  CONSTRAINT `fk_user_team1`
    FOREIGN KEY (`team_id`)
    REFERENCES `team` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_user_local_authority1`
    FOREIGN KEY (`local_authority_id`)
    REFERENCES `local_authority` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_user_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_user_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_user_contact_details1`
    FOREIGN KEY (`contact_details_id`)
    REFERENCES `contact_details` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_user_contact_details2`
    FOREIGN KEY (`partner_contact_details_id`)
    REFERENCES `contact_details` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_user_transport_manager1`
    FOREIGN KEY (`transport_manager_id`)
    REFERENCES `transport_manager` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `enforcement_area`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `enforcement_area` (
  `id` VARCHAR(4) NOT NULL,
  `name` VARCHAR(70) NOT NULL,
  `email_address` VARCHAR(60) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_enforcement_area_user1_idx` (`created_by` ASC),
  INDEX `fk_enforcement_area_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_enforcement_area_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_enforcement_area_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licence`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licence` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `enforcement_area_id` VARCHAR(4) NULL COMMENT 'FK to vehicle_inspectorate.',
  `organisation_id` INT NOT NULL,
  `traffic_area_id` VARCHAR(1) NULL COMMENT 'FK to traffic area.  An Operator can have One licence per area.',
  `lic_no` VARCHAR(18) NULL COMMENT 'Licence number.  Normally 9 Chars.  First denotes goods/psv, second TA, rest ID.',
  `goods_or_psv` VARCHAR(32) NULL,
  `licence_type` VARCHAR(32) NULL,
  `status` VARCHAR(32) NOT NULL,
  `vi_action` VARCHAR(1) NULL COMMENT 'C, U or D.  Triggers VI export.',
  `tot_auth_trailers` INT NULL,
  `tot_auth_vehicles` INT NULL,
  `tot_auth_small_vehicles` INT NULL,
  `tot_auth_medium_vehicles` INT NULL,
  `tot_auth_large_vehicles` INT NULL,
  `tot_community_licences` INT NULL,
  `trailers_in_possession` INT NULL,
  `fabs_reference` VARCHAR(10) NULL,
  `expiry_date` DATE NULL COMMENT 'expiry date',
  `granted_date` DATE NULL COMMENT 'granted date',
  `review_date` DATE NULL,
  `fee_date` DATE NULL,
  `in_force_date` DATE NULL,
  `surrendered_date` DATE NULL,
  `safety_ins_trailers` INT NULL COMMENT 'Max period in weeks between safety inspections.',
  `safety_ins_vehicles` INT NULL COMMENT 'Max period in weeks between safety inspections.',
  `safety_ins` TINYINT(1) NOT NULL DEFAULT 0 COMMENT 'Does own safety inspections.',
  `safety_ins_varies` TINYINT(1) NULL COMMENT 'New olcs column for when some vehicles inspected more often',
  `ni_flag` TINYINT(1) NULL,
  `tachograph_ins` VARCHAR(32) NULL COMMENT 'New olcs column values not applicable, external, internal',
  `tachograph_ins_name` VARCHAR(90) NULL COMMENT 'New olcs column for tachograph inspector',
  `psv_discs_to_be_printed_no` INT NULL,
  `translate_to_welsh` TINYINT(1) NOT NULL DEFAULT 0,
  `is_maintenance_suitable` TINYINT(1) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_licence_vehicle_inspectorate1_idx` (`enforcement_area_id` ASC),
  INDEX `fk_licence_traffic_area1_idx` (`traffic_area_id` ASC),
  INDEX `fk_licence_organisation1_idx` (`organisation_id` ASC),
  INDEX `fk_licence_user1_idx` (`created_by` ASC),
  INDEX `fk_licence_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_licence_ref_data1_idx` (`goods_or_psv` ASC),
  INDEX `fk_licence_ref_data2_idx` (`licence_type` ASC),
  INDEX `fk_licence_ref_data3_idx` (`status` ASC),
  INDEX `fk_licence_ref_data4_idx` (`tachograph_ins` ASC),
  UNIQUE INDEX `licence_lic_no_idx` (`lic_no` ASC),
  CONSTRAINT `fk_licence_vehicle_inspectorate1`
    FOREIGN KEY (`enforcement_area_id`)
    REFERENCES `enforcement_area` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_traffic_area1`
    FOREIGN KEY (`traffic_area_id`)
    REFERENCES `traffic_area` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_organisation1`
    FOREIGN KEY (`organisation_id`)
    REFERENCES `organisation` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_ref_data1`
    FOREIGN KEY (`goods_or_psv`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_ref_data2`
    FOREIGN KEY (`licence_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_ref_data3`
    FOREIGN KEY (`status`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_ref_data4`
    FOREIGN KEY (`tachograph_ins`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `application`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `application` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `licence_id` INT NOT NULL,
  `status` VARCHAR(32) NOT NULL,
  `is_variation` TINYINT(1) NOT NULL,
  `has_entered_reg` TINYINT(1) NULL,
  `tot_auth_trailers` INT NULL,
  `tot_auth_vehicles` INT NULL,
  `tot_auth_small_vehicles` INT NULL,
  `tot_auth_medium_vehicles` INT NULL,
  `tot_auth_large_vehicles` INT NULL,
  `tot_community_licences` INT NULL,
  `licence_type` VARCHAR(32) NULL,
  `bankrupt` TINYINT(1) NULL,
  `administration` TINYINT(1) NULL,
  `disqualified` TINYINT(1) NULL,
  `liquidation` TINYINT(1) NULL,
  `receivership` TINYINT(1) NULL,
  `insolvency_confirmation` TINYINT(1) NOT NULL DEFAULT 0,
  `insolvency_details` VARCHAR(4000) NULL,
  `safety_confirmation` TINYINT(1) NOT NULL DEFAULT 1,
  `received_date` DATETIME NULL COMMENT 'Submitted date.  Was date_entered in OLBS',
  `target_completion_date` DATETIME NULL,
  `granted_date` DATETIME NULL,
  `refused_date` DATETIME NULL,
  `withdrawn_date` DATETIME NULL,
  `withdrawn_reason` VARCHAR(32) NULL,
  `prev_has_licence` TINYINT(1) NULL,
  `prev_had_licence` TINYINT(1) NULL,
  `prev_been_refused` TINYINT(1) NULL,
  `prev_been_revoked` TINYINT(1) NULL,
  `prev_been_at_pi` TINYINT(1) NULL,
  `prev_been_disqualified_tc` TINYINT(1) NULL,
  `prev_purchased_assets` TINYINT(1) NULL,
  `override_ooo` TINYINT(1) NOT NULL DEFAULT 0,
  `prev_conviction` TINYINT(1) NULL,
  `convictions_confirmation` TINYINT(1) NOT NULL DEFAULT 0,
  `psv_operate_small_vhl` TINYINT(1) NULL,
  `psv_small_vhl_notes` VARCHAR(4000) NULL,
  `psv_small_vhl_confirmation` TINYINT(1) NOT NULL DEFAULT 0,
  `psv_no_small_vhl_confirmation` TINYINT(1) NOT NULL DEFAULT 0,
  `psv_limousines` TINYINT(1) NOT NULL DEFAULT 0,
  `psv_no_limousine_confirmation` TINYINT(1) NOT NULL DEFAULT 0,
  `psv_only_limousines_confirmation` TINYINT(1) NOT NULL DEFAULT 0,
  `interim_start` DATE NULL,
  `interim_end` DATE NULL,
  `interim_auth_vehicles` INT NULL,
  `interim_auth_trailers` INT NULL,
  `interim_status` VARCHAR(32) NULL,
  `is_maintenance_suitable` TINYINT(1) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_application_licence1_idx` (`licence_id` ASC),
  INDEX `fk_application_user1_idx` (`created_by` ASC),
  INDEX `fk_application_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_application_ref_data1_idx` (`licence_type` ASC),
  INDEX `fk_application_ref_data2_idx` (`status` ASC),
  INDEX `fk_application_ref_data3_idx` (`interim_status` ASC),
  INDEX `fk_application_ref_data4_idx` (`withdrawn_reason` ASC),
  CONSTRAINT `fk_application_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_application_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_application_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_application_ref_data1`
    FOREIGN KEY (`licence_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_application_ref_data2`
    FOREIGN KEY (`status`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_application_ref_data3`
    FOREIGN KEY (`interim_status`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_application_ref_data4`
    FOREIGN KEY (`withdrawn_reason`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `operating_centre`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `operating_centre` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `address_id` INT NULL,
  `vi_action` VARCHAR(1) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_OperatingCentre_Address1_idx` (`address_id` ASC),
  INDEX `fk_operating_centre_user1_idx` (`created_by` ASC),
  INDEX `fk_operating_centre_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_OperatingCentre_Address1`
    FOREIGN KEY (`address_id`)
    REFERENCES `address` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_operating_centre_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_operating_centre_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `s4`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `s4` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `application_id` INT NULL,
  `licence_id` INT NOT NULL,
  `agreed_date` DATETIME NULL,
  `received_date` DATETIME NOT NULL,
  `outcome` VARCHAR(20) NULL,
  `surrender_licence` TINYINT(1) NOT NULL DEFAULT 0,
  `is_true_s4` TINYINT(1) NOT NULL DEFAULT 0,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_s4_application1_idx` (`application_id` ASC),
  INDEX `fk_s4_licence1_idx` (`licence_id` ASC),
  INDEX `fk_s4_user1_idx` (`created_by` ASC),
  INDEX `fk_s4_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_s4_application1`
    FOREIGN KEY (`application_id`)
    REFERENCES `application` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_s4_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_s4_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_s4_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licence_operating_centre`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licence_operating_centre` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `licence_id` INT NOT NULL,
  `operating_centre_id` INT NOT NULL,
  `ad_placed` TINYINT(1) NOT NULL,
  `ad_placed_in` VARCHAR(70) NULL,
  `ad_placed_date` DATE NULL,
  `sufficient_parking` TINYINT(1) NOT NULL,
  `permission` TINYINT(1) NOT NULL,
  `no_of_trailers_required` INT NULL,
  `no_of_vehicles_required` INT NULL,
  `no_of_vehicles_possessed` INT NULL,
  `no_of_trailers_possessed` INT NULL,
  `vi_action` VARCHAR(1) NULL,
  `added_date` DATE NULL,
  `deleted_date` DATE NULL,
  `is_interim` TINYINT(1) NULL,
  `publication_appropriate` TINYINT(1) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  `s4_id` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_LicenceOperatingCentre_licence_idx` (`licence_id` ASC),
  INDEX `fk_LicenceOperatingCentre_OperatingCentre1_idx` (`operating_centre_id` ASC),
  INDEX `fk_licence_operating_centre_user1_idx` (`created_by` ASC),
  INDEX `fk_licence_operating_centre_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_licence_operating_centre_s41_idx` (`s4_id` ASC),
  CONSTRAINT `fk_LicenceOperatingCentre_licence`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_LicenceOperatingCentre_OperatingCentre1`
    FOREIGN KEY (`operating_centre_id`)
    REFERENCES `operating_centre` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_operating_centre_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_operating_centre_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_operating_centre_s41`
    FOREIGN KEY (`s4_id`)
    REFERENCES `s4` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `application_operating_centre`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `application_operating_centre` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `application_id` INT NOT NULL,
  `operating_centre_id` INT NOT NULL,
  `action` VARCHAR(1) NULL,
  `ad_placed` TINYINT(1) NOT NULL,
  `ad_placed_in` VARCHAR(70) NULL,
  `ad_placed_date` DATE NULL,
  `publication_appropriate` TINYINT(1) NOT NULL DEFAULT 0,
  `permission` TINYINT(1) NOT NULL,
  `sufficient_parking` TINYINT(1) NOT NULL DEFAULT 0,
  `no_of_trailers_required` INT NULL,
  `no_of_vehicles_required` INT NULL,
  `no_of_vehicles_possessed` INT NULL,
  `no_of_trailers_possessed` INT NULL,
  `vi_action` VARCHAR(1) NULL,
  `added_date` DATETIME NULL,
  `deleted_date` DATETIME NULL,
  `is_interim` TINYINT(1) NOT NULL DEFAULT 0,
  `s4_id` INT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_ApplicationOperatingCentre_Application1_idx` (`application_id` ASC),
  INDEX `fk_ApplicationOperatingCentre_OperatingCentre1_idx` (`operating_centre_id` ASC),
  INDEX `fk_application_operating_centre_user1_idx` (`created_by` ASC),
  INDEX `fk_application_operating_centre_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_application_operating_centre_s41_idx` (`s4_id` ASC),
  CONSTRAINT `fk_ApplicationOperatingCentre_Application1`
    FOREIGN KEY (`application_id`)
    REFERENCES `application` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ApplicationOperatingCentre_OperatingCentre1`
    FOREIGN KEY (`operating_centre_id`)
    REFERENCES `operating_centre` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_application_operating_centre_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_application_operating_centre_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_application_operating_centre_s41`
    FOREIGN KEY (`s4_id`)
    REFERENCES `s4` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `traffic_area_enforcement_area`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `traffic_area_enforcement_area` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `traffic_area_id` VARCHAR(1) NOT NULL,
  `enforcement_area_id` VARCHAR(4) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  INDEX `fk_TrafficAreaVehicleInspectorate_TrafficArea1_idx` (`traffic_area_id` ASC),
  INDEX `fk_TrafficAreaVehicleInspectorate_VehicleInspectorate1_idx` (`enforcement_area_id` ASC),
  PRIMARY KEY (`id`),
  INDEX `fk_traffic_area_enforcement_area_user1_idx` (`created_by` ASC),
  INDEX `fk_traffic_area_enforcement_area_user2_idx` (`last_modified_by` ASC),
  UNIQUE INDEX `traffic_area_enforcement_area_unique` (`traffic_area_id` ASC, `enforcement_area_id` ASC),
  CONSTRAINT `fk_TrafficAreaVehicleInspectorate_TrafficArea1`
    FOREIGN KEY (`traffic_area_id`)
    REFERENCES `traffic_area` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_TrafficAreaVehicleInspectorate_VehicleInspectorate1`
    FOREIGN KEY (`enforcement_area_id`)
    REFERENCES `enforcement_area` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_traffic_area_enforcement_area_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_traffic_area_enforcement_area_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `postcode_enforcement_area`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `postcode_enforcement_area` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `enforcement_area_id` VARCHAR(4) NOT NULL,
  `postcode_id` VARCHAR(8) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  INDEX `fk_PostcodeVehicleInspectorate_VehicleInspectorate1_idx` (`enforcement_area_id` ASC),
  PRIMARY KEY (`id`),
  INDEX `fk_postcode_enforcement_area_user1_idx` (`created_by` ASC),
  INDEX `fk_postcode_enforcement_area_user2_idx` (`last_modified_by` ASC),
  UNIQUE INDEX `postcode_enforcement_area_unique` (`enforcement_area_id` ASC, `postcode_id` ASC),
  CONSTRAINT `fk_PostcodeVehicleInspectorate_VehicleInspectorate1`
    FOREIGN KEY (`enforcement_area_id`)
    REFERENCES `enforcement_area` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_postcode_enforcement_area_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_postcode_enforcement_area_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `category`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `category` (
  `id` INT NOT NULL,
  `description` VARCHAR(255) NOT NULL,
  `is_doc_category` TINYINT(1) NOT NULL DEFAULT 1,
  `is_task_category` TINYINT(1) NOT NULL DEFAULT 1,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_document_category_user1_idx` (`created_by` ASC),
  INDEX `fk_document_category_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_document_category_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_document_category_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `document_sub_category`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `document_sub_category` (
  `id` INT NOT NULL,
  `category_id` INT NOT NULL,
  `description` VARCHAR(255) NOT NULL,
  `is_scanned` TINYINT(1) NOT NULL DEFAULT 0,
  `display_free_text` TINYINT(1) NOT NULL DEFAULT 0,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_document_sub_category_document_category1_idx` (`category_id` ASC),
  INDEX `fk_document_sub_category_user1_idx` (`created_by` ASC),
  INDEX `fk_document_sub_category_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_document_sub_category_document_category1`
    FOREIGN KEY (`category_id`)
    REFERENCES `category` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_document_sub_category_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_document_sub_category_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `cases`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `cases` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `case_type` VARCHAR(32) NOT NULL COMMENT 'Created from App.lic or TM',
  `application_id` INT NULL,
  `transport_manager_id` INT NULL,
  `licence_id` INT NULL,
  `ecms_no` VARCHAR(45) NULL,
  `open_date` DATE NOT NULL,
  `close_date` DATE NULL,
  `deleted_date` DATETIME NULL,
  `description` VARCHAR(1024) NULL COMMENT 'Short summary note in old system',
  `is_impounding` TINYINT(1) NOT NULL DEFAULT 0,
  `erru_originating_authority` VARCHAR(50) NULL,
  `erru_transport_undertaking_name` VARCHAR(100) NULL,
  `erru_vrm` VARCHAR(15) NULL,
  `erru_case_type` VARCHAR(32) NULL COMMENT 'MSI type.',
  `annual_test_history` VARCHAR(4000) NULL,
  `prohibition_note` VARCHAR(4000) NULL,
  `conviction_note` VARCHAR(4000) NULL,
  `penalties_note` VARCHAR(4000) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_case_application1_idx` (`application_id` ASC),
  INDEX `fk_case_licence1_idx` (`licence_id` ASC),
  INDEX `fk_case_user1_idx` (`created_by` ASC),
  INDEX `fk_case_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_cases_transport_manager1_idx` (`transport_manager_id` ASC),
  INDEX `fk_cases_ref_data1_idx` (`case_type` ASC),
  INDEX `fk_cases_ref_data2_idx` (`erru_case_type` ASC),
  CONSTRAINT `fk_case_application1`
    FOREIGN KEY (`application_id`)
    REFERENCES `application` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_case_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_case_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_case_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_cases_transport_manager1`
    FOREIGN KEY (`transport_manager_id`)
    REFERENCES `transport_manager` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_cases_ref_data1`
    FOREIGN KEY (`case_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_cases_ref_data2`
    FOREIGN KEY (`erru_case_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `cases_category`
-- -----------------------------------------------------
CREATE TABLE `case_category` (
  `case_id` INT(11) NOT NULL,
  `category_id` VARCHAR(32) NOT NULL,
  INDEX `fk_case_category_cases1_idx` (`case_id` ASC),
  INDEX `fk_case_category_ref_data1_idx` (`category_id` ASC),
  PRIMARY KEY (`case_id`, `category_id`),
  CONSTRAINT `fk_case_category_cases1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_case_category_ref_data1`
    FOREIGN KEY (`category_id`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `opposer`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `opposer` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `contact_details_id` INT NOT NULL,
  `opposer_type` VARCHAR(32) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_opposer_contact_details1_idx` (`contact_details_id` ASC),
  INDEX `fk_opposer_ref_data1_idx` (`opposer_type` ASC),
  INDEX `fk_opposer_user1_idx` (`created_by` ASC),
  INDEX `fk_opposer_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_opposer_contact_details1`
    FOREIGN KEY (`contact_details_id`)
    REFERENCES `contact_details` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_opposer_ref_data1`
    FOREIGN KEY (`opposer_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_opposer_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_opposer_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `opposition`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `opposition` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `opposition_type` VARCHAR(32) NOT NULL,
  `application_id` INT NOT NULL,
  `notes` VARCHAR(4000) NULL,
  `is_copied` TINYINT(1) NOT NULL DEFAULT 0,
  `raised_date` DATE NULL,
  `opposer_id` INT NOT NULL,
  `is_in_time` TINYINT(1) NOT NULL DEFAULT 0,
  `is_public_inquiry` TINYINT(1) NOT NULL DEFAULT 0,
  `deleted_date` DATETIME NULL,
  `is_valid` TINYINT(1) NOT NULL,
  `is_withdrawn` TINYINT(1) NOT NULL,
  `valid_notes` VARCHAR(4000) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_opposition_application1_idx` (`application_id` ASC),
  INDEX `fk_opposition_opposer1_idx` (`opposer_id` ASC),
  INDEX `fk_opposition_user1_idx` (`created_by` ASC),
  INDEX `fk_opposition_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_opposition_ref_data1`
  FOREIGN KEY (`opposition_type`)
  REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_opposition_application1`
    FOREIGN KEY (`application_id`)
    REFERENCES `application` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_opposition_opposer1`
    FOREIGN KEY (`opposer_id`)
    REFERENCES `opposer` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_opposition_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_opposition_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bus_notice_period`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bus_notice_period` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `notice_area` VARCHAR(70) NOT NULL,
  `standard_period` INT NOT NULL,
  `cancellation_period` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_bus_notice_period_user1_idx` (`created_by` ASC),
  INDEX `fk_bus_notice_period_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_bus_notice_period_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_notice_period_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bus_reg`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bus_reg` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `status` VARCHAR(32) NOT NULL,
  `revert_status` VARCHAR(32) NOT NULL,
  `licence_id` INT NOT NULL,
  `bus_notice_period_id` INT NOT NULL COMMENT 'Scottish or other',
  `route_no` INT NOT NULL COMMENT 'Increases by one for each registration added to licence',
  `reg_no` VARCHAR(70) NOT NULL COMMENT 'lic_no plus slash plus route_no',
  `service_no` VARCHAR(70) NULL COMMENT 'Number on front of bus',
  `start_point` VARCHAR(100) NULL,
  `finish_point` VARCHAR(100) NULL,
  `via` VARCHAR(255) NULL,
  `other_details` VARCHAR(800) NULL,
  `received_date` DATE NULL,
  `effective_date` DATE NULL,
  `end_date` DATE NULL,
  `is_short_notice` TINYINT(1) NOT NULL DEFAULT 0 COMMENT 'Application late.  Enables short notice detail entry',
  `use_all_stops` TINYINT(1) NOT NULL DEFAULT 0,
  `has_manoeuvre` TINYINT(1) NOT NULL DEFAULT 0 COMMENT 'Service reverses, turns around etc.',
  `manoeuvre_detail` VARCHAR(255) NULL,
  `need_new_stop` TINYINT(1) NOT NULL DEFAULT 0 COMMENT 'Needs a new bus stop',
  `new_stop_detail` VARCHAR(255) NULL,
  `has_not_fixed_stop` TINYINT(1) NOT NULL DEFAULT 0 COMMENT 'Stops at not predefined stop.  i.e. waved down by user',
  `not_fixed_stop_detail` VARCHAR(255) NULL,
  `subsidised` VARCHAR(32) NOT NULL COMMENT 'Yes, No, In-Part',
  `subsidy_detail` VARCHAR(255) NULL,
  `timetable_acceptable` TINYINT(1) NOT NULL DEFAULT 0,
  `map_supplied` TINYINT(1) NOT NULL DEFAULT 0,
  `route_description` VARCHAR(1000) NULL,
  `copied_to_la_pte` TINYINT(1) NOT NULL DEFAULT 0,
  `la_short_note` TINYINT(1) NOT NULL DEFAULT 0,
  `application_signed` TINYINT(1) NOT NULL DEFAULT 0,
  `operating_centre_id` INT NULL COMMENT 'Populated if the oc address is to be used',
  `completed_date` DATE NULL,
  `route_seq` INT NOT NULL DEFAULT 0 COMMENT 'Increments for each variation',
  `op_notified_la_pte` TINYINT(1) NOT NULL DEFAULT 0,
  `stopping_arrangements` VARCHAR(800) NULL,
  `trc_condition_checked` TINYINT(1) NOT NULL DEFAULT 0,
  `trc_notes` VARCHAR(255) NULL,
  `organisation_email` VARCHAR(255) NULL,
  `is_txc_app` TINYINT(1) NOT NULL DEFAULT 0 COMMENT 'Was created through transxchange',
  `txc_app_type` VARCHAR(20) NULL,
  `reason_cancelled` VARCHAR(255) NULL,
  `reason_refused` VARCHAR(255) NULL,
  `reason_sn_refused` VARCHAR(255) NULL,
  `withdrawn_reason` VARCHAR(32) NULL,
  `short_notice_refused` TINYINT(1) NOT NULL DEFAULT 0,
  `is_quality_partnership` TINYINT(1) NOT NULL DEFAULT 0,
  `quality_partnership_details` VARCHAR(4000) NULL,
  `quality_partnership_facilities_used` TINYINT(1) NOT NULL DEFAULT 0,
  `is_quality_contract` TINYINT(1) NOT NULL DEFAULT 0,
  `quality_contract_details` VARCHAR(4000) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_bus_reg_licence1_idx` (`licence_id` ASC),
  INDEX `fk_bus_reg_bus_notice_period1_idx` (`bus_notice_period_id` ASC),
  INDEX `fk_bus_reg_ref_data1_idx` (`subsidised` ASC),
  INDEX `fk_bus_reg_operating_centre1_idx` (`operating_centre_id` ASC),
  INDEX `fk_bus_reg_user1_idx` (`created_by` ASC),
  INDEX `fk_bus_reg_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_bus_reg_ref_data2_idx` (`withdrawn_reason` ASC),
  INDEX `fk_bus_reg_ref_data3_idx` (`status` ASC),
  INDEX `fk_bus_reg_ref_data4_idx` (`revert_status` ASC),
  CONSTRAINT `fk_bus_reg_licence1`
  FOREIGN KEY (`licence_id`)
  REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_reg_bus_notice_period1`
  FOREIGN KEY (`bus_notice_period_id`)
  REFERENCES `bus_notice_period` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_reg_ref_data1`
  FOREIGN KEY (`subsidised`)
  REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_reg_operating_centre1`
  FOREIGN KEY (`operating_centre_id`)
  REFERENCES `operating_centre` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_reg_user1`
  FOREIGN KEY (`created_by`)
  REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_reg_user2`
  FOREIGN KEY (`last_modified_by`)
  REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_reg_ref_data2`
  FOREIGN KEY (`withdrawn_reason`)
  REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_reg_ref_data3`
  FOREIGN KEY (`status`)
  REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_reg_ref_data4`
  FOREIGN KEY (`revert_status`)
  REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
  ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `document`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `document` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `document_store_id` VARCHAR(255) NOT NULL,
  `description` VARCHAR(255) NULL,
  `traffic_area_id` VARCHAR(1) NULL,
  `category_id` INT NOT NULL,
  `document_sub_category_id` INT NULL,
  `is_read_only` TINYINT(1) NULL,
  `licence_id` INT NULL,
  `application_id` INT NULL,
  `case_id` INT NULL,
  `transport_manager_id` INT NULL,
  `operating_centre_id` INT NULL,
  `opposition_id` INT NULL,
  `bus_reg_id` INT NULL,
  `issued_date` DATETIME NULL,
  `filename` VARCHAR(255) NULL,
  `file_extension` varchar(32) NOT NULL,
  `deleted_date` DATETIME NULL,
  `is_digital` TINYINT(1) NOT NULL DEFAULT 0 COMMENT 'Flag true if doc was received or sent digitally',
  `size` INT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_document_ref_data1_idx` (`file_extension` ASC),
  INDEX `fk_document_traffic_area1_idx` (`traffic_area_id` ASC),
  INDEX `fk_document_document_category1_idx` (`category_id` ASC),
  INDEX `fk_document_document_sub_category1_idx` (`document_sub_category_id` ASC),
  INDEX `fk_document_licence1_idx` (`licence_id` ASC),
  INDEX `fk_document_application1_idx` (`application_id` ASC),
  INDEX `fk_document_cases1_idx` (`case_id` ASC),
  INDEX `fk_document_transport_manager1_idx` (`transport_manager_id` ASC),
  INDEX `fk_document_operating_centre1_idx` (`operating_centre_id` ASC),
  INDEX `fk_document_user1_idx` (`created_by` ASC),
  INDEX `fk_document_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_document_opposition1_idx` (`opposition_id` ASC),
  INDEX `fk_document_bus_reg1_idx` (`bus_reg_id` ASC),
  CONSTRAINT `fk_document_ref_data1_idx`
    FOREIGN KEY (`file_extension`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_document_traffic_area1`
    FOREIGN KEY (`traffic_area_id`)
    REFERENCES `traffic_area` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_document_document_category1`
    FOREIGN KEY (`category_id`)
    REFERENCES `category` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_document_document_sub_category1`
    FOREIGN KEY (`document_sub_category_id`)
    REFERENCES `document_sub_category` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_document_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_document_application1`
    FOREIGN KEY (`application_id`)
    REFERENCES `application` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_document_cases1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_document_transport_manager1`
    FOREIGN KEY (`transport_manager_id`)
    REFERENCES `transport_manager` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_document_operating_centre1`
    FOREIGN KEY (`operating_centre_id`)
    REFERENCES `operating_centre` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_document_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_document_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_document_opposition1`
    FOREIGN KEY (`opposition_id`)
    REFERENCES `opposition` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_document_bus_reg1`
    FOREIGN KEY (`bus_reg_id`)
    REFERENCES `bus_reg` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `doc_process`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `doc_process` (
  `id` INT NOT NULL,
  `description` VARCHAR(255) NOT NULL,
  `category_id` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_doc_process_user1_idx` (`created_by` ASC),
  INDEX `fk_doc_process_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_doc_process_document_category1_idx` (`category_id` ASC),
  CONSTRAINT `fk_doc_process_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_doc_process_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_doc_process_document_category1`
    FOREIGN KEY (`category_id`)
    REFERENCES `category` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `doc_template`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `doc_template` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `doc_process_id` INT NOT NULL,
  `document_sub_category_id` INT NOT NULL,
  `description` VARCHAR(255) NOT NULL,
  `document_id` INT NOT NULL,
  `is_ni` TINYINT(1) NOT NULL DEFAULT 0,
  `suppress_from_op` TINYINT(1) NOT NULL,
  `category_id` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_doc_template_doc_process1_idx` (`doc_process_id` ASC),
  INDEX `fk_doc_template_document_sub_category1_idx` (`document_sub_category_id` ASC),
  INDEX `fk_doc_template_document1_idx` (`document_id` ASC),
  INDEX `fk_doc_template_user1_idx` (`created_by` ASC),
  INDEX `fk_doc_template_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_doc_template_document_category1_idx` (`category_id` ASC),
  CONSTRAINT `fk_doc_template_doc_process1`
    FOREIGN KEY (`doc_process_id`)
    REFERENCES `doc_process` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_doc_template_document_sub_category1`
    FOREIGN KEY (`document_sub_category_id`)
    REFERENCES `document_sub_category` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_doc_template_document1`
    FOREIGN KEY (`document_id`)
    REFERENCES `document` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_doc_template_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_doc_template_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_doc_template_document_category1`
    FOREIGN KEY (`category_id`)
    REFERENCES `category` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `doc_bookmark`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `doc_bookmark` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(50) NOT NULL,
  `description` VARCHAR(255) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_doc_bookmark_user1_idx` (`created_by` ASC),
  INDEX `fk_doc_bookmark_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_doc_bookmark_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_doc_bookmark_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `doc_paragraph`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `doc_paragraph` (
  `id` INT NOT NULL,
  `para_title` VARCHAR(255) NOT NULL,
  `para_text` VARCHAR(1000) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_doc_paragraph_user1_idx` (`created_by` ASC),
  INDEX `fk_doc_paragraph_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_doc_paragraph_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_doc_paragraph_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `doc_paragraph_bookmark`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `doc_paragraph_bookmark` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `doc_bookmark_id` INT NOT NULL,
  `doc_paragraph_id` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_doc_paragraph_bookmark_doc_paragraph1_idx` (`doc_paragraph_id` ASC),
  INDEX `fk_doc_paragraph_bookmark_user1_idx` (`created_by` ASC),
  INDEX `fk_doc_paragraph_bookmark_user2_idx` (`last_modified_by` ASC),
  UNIQUE INDEX `doc_paragraph_bookmark_unique` (`doc_bookmark_id` ASC, `doc_paragraph_id` ASC),
  CONSTRAINT `fk_doc_paragraph_bookmark_doc_bookmark1`
    FOREIGN KEY (`doc_bookmark_id`)
    REFERENCES `doc_bookmark` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_doc_paragraph_bookmark_doc_paragraph1`
    FOREIGN KEY (`doc_paragraph_id`)
    REFERENCES `doc_paragraph` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_doc_paragraph_bookmark_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_doc_paragraph_bookmark_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `doc_template_bookmark`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `doc_template_bookmark` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `doc_template_id` INT NOT NULL,
  `doc_bookmark_id` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_doc_template_bookmark_doc_bookmark1_idx` (`doc_bookmark_id` ASC),
  INDEX `fk_doc_template_bookmark_user1_idx` (`created_by` ASC),
  INDEX `fk_doc_template_bookmark_user2_idx` (`last_modified_by` ASC),
  UNIQUE INDEX `doc_template_bookmark_unique` (`doc_template_id` ASC, `doc_bookmark_id` ASC),
  CONSTRAINT `fk_doc_template_bookmark_doc_template1`
    FOREIGN KEY (`doc_template_id`)
    REFERENCES `doc_template` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_doc_template_bookmark_doc_bookmark1`
    FOREIGN KEY (`doc_bookmark_id`)
    REFERENCES `doc_bookmark` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_doc_template_bookmark_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_doc_template_bookmark_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `email`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `email` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `added_date` DATETIME NULL,
  `deferred_date` DATETIME NULL,
  `sent_date` DATETIME NULL,
  `importance` SMALLINT NULL,
  `is_sensitive` TINYINT(1) NULL,
  `subject` VARCHAR(255) NULL,
  `created_by` INT NULL,
  `last_updated_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_email_user1_idx` (`created_by` ASC),
  INDEX `fk_email_user2_idx` (`last_updated_by` ASC),
  CONSTRAINT `fk_email_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_email_user2`
    FOREIGN KEY (`last_updated_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `email_attachment`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `email_attachment` (
  `email_id` INT NOT NULL,
  `document_id` INT NOT NULL,
  INDEX `fk_email_attachment_email1_idx` (`email_id` ASC),
  INDEX `fk_email_attachment_document1_idx` (`document_id` ASC),
  PRIMARY KEY (`email_id`, `document_id`),
  CONSTRAINT `fk_email_attachment_email1`
    FOREIGN KEY (`email_id`)
    REFERENCES `email` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_email_attachment_document1`
    FOREIGN KEY (`document_id`)
    REFERENCES `document` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `email_body`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `email_body` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `seq` INT NOT NULL,
  `email_id` INT NOT NULL,
  `text` VARCHAR(8000) NULL,
  INDEX `fk_email_body_email1_idx` (`email_id` ASC),
  PRIMARY KEY (`id`),
  CONSTRAINT `fk_email_body_email1`
    FOREIGN KEY (`email_id`)
    REFERENCES `email` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `email_recipient`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `email_recipient` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `email_id` INT NOT NULL,
  `type` SMALLINT NOT NULL,
  `email_address` VARCHAR(255) NOT NULL,
  INDEX `fk_email_recipient_email1_idx` (`email_id` ASC),
  PRIMARY KEY (`id`),
  CONSTRAINT `fk_email_recipient_email1`
    FOREIGN KEY (`email_id`)
    REFERENCES `email` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `vehicle`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `vehicle` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `is_novelty` TINYINT(1) NULL,
  `vrm` VARCHAR(20) NULL COMMENT 'Nullable for PSVs',
  `plated_weight` INT NULL,
  `certificate_no` VARCHAR(50) NULL COMMENT 'psv only',
  `vi_action` VARCHAR(1) NULL,
  `section_26` TINYINT(1) NOT NULL DEFAULT 0,
  `section_26_curtail` TINYINT(1) NOT NULL DEFAULT 0,
  `section_26_revoked` TINYINT(1) NOT NULL DEFAULT 0,
  `section_26_suspend` TINYINT(1) NOT NULL DEFAULT 0,
  `deleted_date` DATETIME NULL,
  `specified_date` DATETIME NULL,
  `psv_type` VARCHAR(32) NULL COMMENT 'small, medium or large',
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_vehicle_user1_idx` (`created_by` ASC),
  INDEX `fk_vehicle_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_vehicle_ref_data1_idx` (`psv_type` ASC),
  CONSTRAINT `fk_vehicle_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_vehicle_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_vehicle_ref_data1`
    FOREIGN KEY (`psv_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `trailer`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `trailer` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `licence_id` INT NOT NULL,
  `trailer_no` VARCHAR(20) NOT NULL,
  `specified_date` DATETIME NULL,
  `deleted_date` DATETIME NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_trailer_licence1_idx` (`licence_id` ASC),
  INDEX `fk_trailer_user1_idx` (`created_by` ASC),
  INDEX `fk_trailer_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_trailer_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_trailer_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_trailer_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licence_vehicle`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licence_vehicle` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `licence_id` INT NOT NULL,
  `vehicle_id` INT NOT NULL,
  `application_id` INT NULL,
  `received_date` DATE NULL,
  `deleted_date` DATETIME NULL,
  `removal_reason` VARCHAR(32) NULL,
  `removal` TINYINT(1) NULL,
  `removal_letter_seed_date` DATETIME NULL,
  `removal_date` DATETIME NULL,
  `is_interim` INT NULL,
  `vi_action` VARCHAR(1) NULL,
  `warning_letter_seed_date` DATETIME NULL,
  `warning_letter_sent_date` DATETIME NULL,
  `specified_date` DATETIME NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  INDEX `fk_licence_vehicle_vehicle1_idx` (`vehicle_id` ASC),
  PRIMARY KEY (`id`),
  INDEX `fk_licence_vehicle_user1_idx` (`created_by` ASC),
  INDEX `fk_licence_vehicle_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_licence_vehicle_ref_data1_idx` (`removal_reason` ASC),
  INDEX `fk_licence_vehicle_application1_idx` (`application_id` ASC),
  CONSTRAINT `fk_licence_vehicle_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_vehicle_vehicle1`
    FOREIGN KEY (`vehicle_id`)
    REFERENCES `vehicle` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_vehicle_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_vehicle_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_vehicle_ref_data1`
    FOREIGN KEY (`removal_reason`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_vehicle_application1`
    FOREIGN KEY (`application_id`)
    REFERENCES `application` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `goods_disc`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `goods_disc` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `licence_vehicle_id` INT NOT NULL,
  `disc_no` VARCHAR(50) NULL,
  `issued_date` DATETIME NULL,
  `ceased_date` DATETIME NULL,
  `is_copy` TINYINT(1) NOT NULL DEFAULT 0,
  `is_interim` TINYINT(1) NOT NULL DEFAULT 0,
  `is_printing` TINYINT(1) NOT NULL DEFAULT 0,
  `reprint_required` TINYINT(1) NOT NULL DEFAULT 0,
  `removal_reason` VARCHAR(32) NULL,
  `removal_explanation` VARCHAR(32) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_goods_disc_licence_vehicle1_idx` (`licence_vehicle_id` ASC),
  INDEX `fk_goods_disc_user1_idx` (`created_by` ASC),
  INDEX `fk_goods_disc_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_goods_disc_ref_data1_idx` (`removal_reason` ASC),
  INDEX `fk_goods_disc_ref_data2_idx` (`removal_explanation` ASC),
  CONSTRAINT `fk_goods_disc_licence_vehicle1`
    FOREIGN KEY (`licence_vehicle_id`)
    REFERENCES `licence_vehicle` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_goods_disc_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_goods_disc_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_goods_disc_ref_data1`
    FOREIGN KEY (`removal_reason`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_goods_disc_ref_data2`
    FOREIGN KEY (`removal_explanation`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `psv_disc`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `psv_disc` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `licence_id` INT NOT NULL,
  `disc_no` VARCHAR(50) NULL,
  `issued_date` DATETIME NULL,
  `ceased_date` DATETIME NULL,
  `is_copy` TINYINT(1) NULL,
  `is_printing` TINYINT(1) NOT NULL DEFAULT 0,
  `reprint_required` TINYINT(1) NULL,
  `start_date` DATE NULL,
  `removal_reason` VARCHAR(32) NULL,
  `removal_explanation` VARCHAR(32) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_psv_disc_licence1_idx` (`licence_id` ASC),
  INDEX `fk_psv_disc_user1_idx` (`created_by` ASC),
  INDEX `fk_psv_disc_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_psv_disc_ref_data1_idx` (`removal_reason` ASC),
  INDEX `fk_psv_disc_ref_data2_idx` (`removal_explanation` ASC),
  CONSTRAINT `fk_psv_disc_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_psv_disc_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_psv_disc_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_psv_disc_ref_data1`
    FOREIGN KEY (`removal_reason`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_psv_disc_ref_data2`
    FOREIGN KEY (`removal_explanation`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `organisation_person`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `organisation_person` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `person_id` INT NOT NULL,
  `organisation_id` INT NOT NULL,
  `deleted_date` DATETIME NULL,
  `added_date` VARCHAR(45) NULL,
  `position` VARCHAR(45) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_owner_person1_idx` (`person_id` ASC),
  INDEX `fk_owner_organisation1_idx` (`organisation_id` ASC),
  INDEX `fk_owner_user1_idx` (`created_by` ASC),
  INDEX `fk_owner_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_owner_person1`
    FOREIGN KEY (`person_id`)
    REFERENCES `person` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_owner_organisation1`
    FOREIGN KEY (`organisation_id`)
    REFERENCES `organisation` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_owner_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_owner_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `phone_contact`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `phone_contact` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `phone_contact_type` VARCHAR(32) NOT NULL,
  `phone_number` VARCHAR(45) NULL,
  `details` VARCHAR(45) NULL,
  `contact_details_id` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_phone_contact_contact_details1_idx` (`contact_details_id` ASC),
  INDEX `fk_phone_contact_ref_data1_idx` (`phone_contact_type` ASC),
  INDEX `fk_phone_contact_user1_idx` (`created_by` ASC),
  INDEX `fk_phone_contact_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_phone_contact_contact_details1`
    FOREIGN KEY (`contact_details_id`)
    REFERENCES `contact_details` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_phone_contact_ref_data1`
    FOREIGN KEY (`phone_contact_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_phone_contact_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_phone_contact_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `company_subsidiary`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `company_subsidiary` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(70) NULL,
  `company_no` VARCHAR(12) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_company_subsidiary_user1_idx` (`created_by` ASC),
  INDEX `fk_company_subsidiary_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_company_subsidiary_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_company_subsidiary_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `company_subsidiary_licence`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `company_subsidiary_licence` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `company_subsidiary_id` INT NOT NULL,
  `licence_id` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_company_subsidiary_has_licence_licence1_idx` (`licence_id` ASC),
  INDEX `fk_company_subsidiary_has_licence_company_subsidiary1_idx` (`company_subsidiary_id` ASC),
  INDEX `fk_company_subsidiary_licence_user1_idx` (`created_by` ASC),
  INDEX `fk_company_subsidiary_licence_user2_idx` (`last_modified_by` ASC),
  UNIQUE INDEX `company_subsid_licence_unique` (`company_subsidiary_id` ASC, `licence_id` ASC),
  CONSTRAINT `fk_company_subsidiary_has_licence_company_subsidiary1`
    FOREIGN KEY (`company_subsidiary_id`)
    REFERENCES `company_subsidiary` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_company_subsidiary_has_licence_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_company_subsidiary_licence_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_company_subsidiary_licence_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `trading_name`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `trading_name` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(160) NOT NULL,
  `licence_id` INT NULL,
  `organisation_id` INT NULL COMMENT 'Used by IRFO',
  `deleted_date` DATETIME NULL,
  `vi_action` VARCHAR(1) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_trading_name_licence1_idx` (`licence_id` ASC),
  INDEX `fk_trading_name_organisation1_idx` (`organisation_id` ASC),
  INDEX `fk_trading_name_user1_idx` (`created_by` ASC),
  INDEX `fk_trading_name_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_trading_name_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_trading_name_organisation1`
    FOREIGN KEY (`organisation_id`)
    REFERENCES `organisation` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_trading_name_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_trading_name_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `tm_qualification`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `tm_qualification` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `transport_manager_id` INT NOT NULL,
  `country_code` VARCHAR(8) NOT NULL,
  `qualification_type` VARCHAR(32) NOT NULL,
  `issued_date` DATE NULL,
  `deleted_date` DATETIME NULL,
  `serial_no` VARCHAR(20) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_qualification_transport_manager1_idx` (`transport_manager_id` ASC),
  INDEX `fk_qualification_country1_idx` (`country_code` ASC),
  INDEX `fk_qualification_ref_data1_idx` (`qualification_type` ASC),
  INDEX `fk_tm_qualification_user1_idx` (`created_by` ASC),
  INDEX `fk_tm_qualification_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_qualification_transport_manager1`
    FOREIGN KEY (`transport_manager_id`)
    REFERENCES `transport_manager` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_qualification_country1`
    FOREIGN KEY (`country_code`)
    REFERENCES `country` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_qualification_ref_data1`
    FOREIGN KEY (`qualification_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tm_qualification_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tm_qualification_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `transport_manager_application`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `transport_manager_application` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `transport_manager_id` INT NOT NULL,
  `application_id` INT NOT NULL,
  `deleted_date` DATETIME NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `fk_transport_manager_application_transport_manager1_idx` (`transport_manager_id` ASC),
  INDEX `fk_transport_manager_application_application1_idx` (`application_id` ASC),
  INDEX `fk_transport_manager_application_user1_idx` (`created_by` ASC),
  INDEX `fk_transport_manager_application_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_transport_manager_application_transport_manager1`
    FOREIGN KEY (`transport_manager_id`)
    REFERENCES `transport_manager` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_transport_manager_application_application1`
    FOREIGN KEY (`application_id`)
    REFERENCES `application` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_transport_manager_application_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_transport_manager_application_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `transport_manager_licence`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `transport_manager_licence` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `transport_manager_id` INT NOT NULL,
  `licence_id` INT NOT NULL,
  `deleted_date` DATETIME NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_transport_manager_licence_transport_manager1_idx` (`transport_manager_id` ASC),
  INDEX `fk_transport_manager_licence_licence1_idx` (`licence_id` ASC),
  INDEX `fk_transport_manager_licence_user1_idx` (`created_by` ASC),
  INDEX `fk_transport_manager_licence_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_transport_manager_licence_transport_manager1`
    FOREIGN KEY (`transport_manager_id`)
    REFERENCES `transport_manager` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_transport_manager_licence_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_transport_manager_licence_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_transport_manager_licence_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `workshop`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `workshop` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `licence_id` INT NOT NULL,
  `is_external` TINYINT(1) NOT NULL DEFAULT 0 COMMENT 'Is garage or workshop.',
  `maintenance` TINYINT(1) NOT NULL DEFAULT 0 COMMENT 'Carries out maintenance.',
  `safety_inspection` TINYINT(1) NOT NULL DEFAULT 0 COMMENT 'Carries out own safety inspections.',
  `removed_date` DATETIME NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  `contact_details_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_workshop_licence1_idx` (`licence_id` ASC),
  INDEX `fk_workshop_user1_idx` (`created_by` ASC),
  INDEX `fk_workshop_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_workshop_contact_details1_idx` (`contact_details_id` ASC),
  CONSTRAINT `fk_workshop_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_workshop_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_workshop_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_workshop_contact_details1`
    FOREIGN KEY (`contact_details_id`)
    REFERENCES `contact_details` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `appeal`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `appeal` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `appeal_no` VARCHAR(20) NULL,
  `case_id` INT NULL,
  `tm_case_id` INT NULL,
  `deadline_date` DATETIME NULL,
  `appeal_date` DATETIME NULL,
  `outline_ground` VARCHAR(1024) NULL,
  `hearing_date` DATETIME NULL,
  `papers_due_date` DATETIME NULL,
  `comment` VARCHAR(1024) NULL,
  `papers_sent_date` DATE NULL,
  `decision_date` DATE NULL,
  `reason` VARCHAR(32) NULL,
  `outcome` VARCHAR(32) NULL,
  `withdrawn_date` DATETIME NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  INDEX `fk_appeal_case1_idx` (`case_id` ASC),
  PRIMARY KEY (`id`),
  INDEX `fk_appeal_user1_idx` (`created_by` ASC),
  INDEX `fk_appeal_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_appeal_ref_data1_idx` (`reason` ASC),
  INDEX `fk_appeal_ref_data2_idx` (`outcome` ASC),
  CONSTRAINT `fk_appeal_case1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_appeal_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_appeal_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_appeal_ref_data1`
    FOREIGN KEY (`reason`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_appeal_ref_data2`
    FOREIGN KEY (`outcome`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `stay`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `stay` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `case_id` INT NOT NULL,
  `request_date` DATETIME NULL,
  `withdrawn_date` DATETIME NULL,
  `decision_date` DATETIME NULL,
  `outcome` VARCHAR(32) NULL,
  `notes` VARCHAR(1024) NULL,
  `stay_type` VARCHAR(32) NOT NULL COMMENT 'TC or UT',
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_stay_case1_idx` (`case_id` ASC),
  INDEX `fk_stay_user1_idx` (`created_by` ASC),
  INDEX `fk_stay_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_stay_ref_data1_idx` (`outcome` ASC),
  INDEX `fk_stay_ref_data2_idx` (`stay_type` ASC),
  CONSTRAINT `fk_stay_case1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_stay_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_stay_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_stay_ref_data1`
    FOREIGN KEY (`outcome`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_stay_ref_data2`
    FOREIGN KEY (`stay_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `driver`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `driver` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `contact_details_id` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_driver_contact_details1_idx` (`contact_details_id` ASC),
  INDEX `fk_driver_user1_idx` (`created_by` ASC),
  INDEX `fk_driver_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_driver_contact_details1`
    FOREIGN KEY (`contact_details_id`)
    REFERENCES `contact_details` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_driver_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_driver_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `complaint`
-- -----------------------------------------------------
CREATE TABLE `complaint` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `complainant_forename` varchar(40) DEFAULT NULL,
  `complainant_family_name` varchar(40) DEFAULT NULL,
  `status` varchar(32) DEFAULT NULL,
  `complaint_type` varchar(32) DEFAULT NULL,
  `created_by` int(11) DEFAULT NULL,
  `last_modified_by` int(11) DEFAULT NULL,
  `case_id` int(11) DEFAULT NULL,
  `complaint_date` datetime DEFAULT NULL,
  `driver_forename` varchar(40) DEFAULT NULL,
  `driver_family_name` varchar(40) DEFAULT NULL,
  `description` varchar(4000) DEFAULT NULL,
  `vrm` varchar(20) DEFAULT NULL,
  `created_on` datetime DEFAULT NULL,
  `last_modified_on` datetime DEFAULT NULL,
  `version` int(11) NOT NULL DEFAULT '1',
  PRIMARY KEY (`id`),
  KEY `IDX_5F2732B57B00651C` (`status`),
  KEY `IDX_5F2732B553DF8182` (`complaint_type`),
  KEY `IDX_5F2732B5DE12AB56` (`created_by`),
  KEY `IDX_5F2732B565CF370E` (`last_modified_by`),
  KEY `IDX_5F2732B5CF10D4F5` (`case_id`),
  CONSTRAINT `FK_5F2732B553DF8182` FOREIGN KEY (`complaint_type`) REFERENCES `ref_data` (`id`),
  CONSTRAINT `FK_5F2732B565CF370E` FOREIGN KEY (`last_modified_by`) REFERENCES `user` (`id`),
  CONSTRAINT `FK_5F2732B57B00651C` FOREIGN KEY (`status`) REFERENCES `ref_data` (`id`),
  CONSTRAINT `FK_5F2732B5CF10D4F5` FOREIGN KEY (`case_id`) REFERENCES `cases` (`id`),
  CONSTRAINT `FK_5F2732B5DE12AB56` FOREIGN KEY (`created_by`) REFERENCES `user` (`id`)
) ENGINE=InnoDB;


-- -----------------------------------------------------
-- Table `statement`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `statement` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `case_id` INT NOT NULL,
  `statement_type` varchar(32) NOT NULL,
  `vrm` VARCHAR(20) NULL,
  `stopped_date` DATETIME NULL,
  `requested_date` DATETIME NULL,
  `authorisers_title` VARCHAR(40) NULL,
  `authorisers_decision` VARCHAR(4000) NULL,
  `contact_type` VARCHAR(32) NULL,
  `issued_date` DATETIME NULL,
  `licence_no` VARCHAR(20) NULL,
  `licence_type` VARCHAR(32) NULL,
  `requestors_body` VARCHAR(40) NULL,
  `requestors_address_id` INT NULL,
  `requestors_family_name` VARCHAR(35) NULL,
  `requestors_forename` VARCHAR(35) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  INDEX `fk_statement_case1_idx` (`case_id` ASC),
  PRIMARY KEY (`id`),
  INDEX `fk_statement_type1_idx` (`statement_type` ASC),
  INDEX `fk_statement_address1_idx` (`requestors_address_id` ASC),
  INDEX `fk_statement_user1_idx` (`created_by` ASC),
  INDEX `fk_statement_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_statement_ref_data2_idx` (`contact_type` ASC),
  CONSTRAINT `fk_statement_type1`
    FOREIGN KEY (`statement_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_statement_case1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_statement_address1`
    FOREIGN KEY (`requestors_address_id`)
    REFERENCES `address` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_statement_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_statement_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_statement_ref_data2`
    FOREIGN KEY (`contact_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `prohibition`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `prohibition` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `case_id` INT NOT NULL,
  `prohibition_date` DATE NOT NULL,
  `cleared_date` DATE NULL,
  `is_trailer` TINYINT(1) NOT NULL DEFAULT 0,
  `prohibition_type` VARCHAR(32) NOT NULL,
  `vrm` VARCHAR(20) NULL,
  `imposed_at` VARCHAR(255) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_prohibition_case1_idx` (`case_id` ASC),
  INDEX `fk_prohibition_user1_idx` (`created_by` ASC),
  INDEX `fk_prohibition_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_prohibition_ref_data1_idx` (`prohibition_type` ASC),
  CONSTRAINT `fk_prohibition_case1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_prohibition_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_prohibition_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_prohibition_ref_data1`
    FOREIGN KEY (`prohibition_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `conviction_category`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `conviction_category` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `description` VARCHAR(1024) NOT NULL,
  `parent_id` INT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_conviction_category_conviction_category1_idx` (`parent_id` ASC),
  INDEX `fk_conviction_category_user1_idx` (`created_by` ASC),
  INDEX `fk_conviction_category_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_conviction_category_conviction_category1`
    FOREIGN KEY (`parent_id`)
    REFERENCES `conviction_category` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_conviction_category_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_conviction_category_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `conviction`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `conviction` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `defendant_type` VARCHAR(32) NOT NULL,
  `offence_date` DATETIME NULL,
  `conviction_date` DATETIME NULL,
  `court` VARCHAR(70) NULL,
  `penalty` VARCHAR(255) NULL,
  `costs` VARCHAR(255) NULL COMMENT 'New olcs field?',
  `msi` TINYINT(1) NULL,
  `is_dealt_with` TINYINT(1) NOT NULL DEFAULT 0,
  `is_declared` TINYINT(1) NOT NULL DEFAULT 0,
  `operator_name` VARCHAR(70) NULL,
  `birth_date` DATE NULL,
  `notes` VARCHAR(4000) NULL,
  `taken_into_consideration` VARCHAR(4000) NULL,
  `category_text` VARCHAR(1024) NULL COMMENT 'user entered category for non act',
  `conviction_category` VARCHAR(32) NULL,
  `person_id` INT NULL,
  `organisation_id` INT NULL,
  `transport_manager_id` INT NULL,
  `case_id` INT NOT NULL,
  `person_firstname` VARCHAR(70) NULL,
  `person_lastname` VARCHAR(70) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_conviction_conviction_category1_idx` (`conviction_category` ASC),
  INDEX `fk_conviction_person1_idx` (`person_id` ASC),
  INDEX `fk_conviction_organisation1_idx` (`organisation_id` ASC),
  INDEX `fk_conviction_transport_manager1_idx` (`transport_manager_id` ASC),
  INDEX `fk_conviction_user1_idx` (`created_by` ASC),
  INDEX `fk_conviction_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_conviction_operator_case1_idx` (`case_id` ASC),
  INDEX `fk_conviction_ref_data1_idx` (`defendant_type` ASC),
  CONSTRAINT `fk_conviction_conviction_category1`
    FOREIGN KEY (`conviction_category`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_conviction_person1`
    FOREIGN KEY (`person_id`)
    REFERENCES `person` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_conviction_organisation1`
    FOREIGN KEY (`organisation_id`)
    REFERENCES `organisation` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_conviction_transport_manager1`
    FOREIGN KEY (`transport_manager_id`)
    REFERENCES `transport_manager` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_conviction_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_conviction_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_conviction_case1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_conviction_ref_data1`
    FOREIGN KEY (`defendant_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `irfo_country`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `irfo_country` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `description` VARCHAR(100) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_irfo_country_user1_idx` (`created_by` ASC),
  INDEX `fk_irfo_country_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_irfo_country_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_country_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `irfo_gv_permit_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `irfo_gv_permit_type` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `description` VARCHAR(100) NOT NULL,
  `irfo_country_id` INT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_irfo_gv_permit_type_irfo_country1_idx` (`irfo_country_id` ASC),
  INDEX `fk_irfo_gv_permit_type_user1_idx` (`created_by` ASC),
  INDEX `fk_irfo_gv_permit_type_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_irfo_gv_permit_type_irfo_country1`
    FOREIGN KEY (`irfo_country_id`)
    REFERENCES `irfo_country` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_gv_permit_type_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_gv_permit_type_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `irfo_gv_permit`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `irfo_gv_permit` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `organisation_id` INT NOT NULL,
  `exemption_details` VARCHAR(255) NULL,
  `expiry_date` DATE NULL,
  `is_fee_exempt` TINYINT(1) NOT NULL DEFAULT 0,
  `in_force_date` DATE NULL,
  `irfo_fee_id` VARCHAR(10) NULL,
  `no_of_copies` INT NOT NULL DEFAULT 0,
  `note` VARCHAR(2000) NULL,
  `permit_printed` TINYINT(1) NOT NULL DEFAULT 0,
  `irfo_gv_permit_type_id` INT NOT NULL,
  `year_required` INT NULL,
  `irfo_permit_status` VARCHAR(32) NOT NULL,
  `withdrawn_reason` VARCHAR(32) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_irfo_gv_permit_user1_idx` (`created_by` ASC),
  INDEX `fk_irfo_gv_permit_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_irfo_gv_permit_organisation1_idx` (`organisation_id` ASC),
  INDEX `fk_irfo_gv_permit_irfo_gv_permit_type1_idx` (`irfo_gv_permit_type_id` ASC),
  INDEX `fk_irfo_gv_permit_ref_data1_idx` (`irfo_permit_status` ASC),
  INDEX `fk_irfo_gv_permit_ref_data2_idx` (`withdrawn_reason` ASC),
  CONSTRAINT `fk_irfo_gv_permit_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_gv_permit_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_gv_permit_organisation1`
    FOREIGN KEY (`organisation_id`)
    REFERENCES `organisation` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_gv_permit_irfo_gv_permit_type1`
    FOREIGN KEY (`irfo_gv_permit_type_id`)
    REFERENCES `irfo_gv_permit_type` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_gv_permit_ref_data1`
    FOREIGN KEY (`irfo_permit_status`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_gv_permit_ref_data2`
    FOREIGN KEY (`withdrawn_reason`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `irfo_psv_auth_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `irfo_psv_auth_type` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `description` VARCHAR(100) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_irfo_psv_auth_type_user1_idx` (`created_by` ASC),
  INDEX `fk_irfo_psv_auth_type_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_irfo_psv_auth_type_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_psv_auth_type_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `irfo_psv_auth`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `irfo_psv_auth` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `organisation_id` INT NOT NULL,
  `exemption_details` VARCHAR(255) NULL,
  `expiry_date` DATE NULL,
  `is_fee_exempt_application` TINYINT(1) NOT NULL DEFAULT 0,
  `is_fee_exempt_annual` TINYINT(1) NOT NULL DEFAULT 0,
  `in_force_date` DATE NULL,
  `irfo_fee_id` VARCHAR(10) NOT NULL,
  `irfo_file_no` VARCHAR(10) NOT NULL,
  `copies_issued` INT NOT NULL DEFAULT 0,
  `copies_required` INT NOT NULL DEFAULT 0,
  `copies_required_total` INT NOT NULL DEFAULT 0,
  `copies_issued_total` INT NOT NULL DEFAULT 0,
  `journey_frequency` VARCHAR(32) NULL,
  `last_date_copies_req` DATETIME NULL,
  `renewal_date` DATE NULL,
  `service_route_from` VARCHAR(30) NOT NULL,
  `service_route_to` VARCHAR(30) NOT NULL,
  `irfo_psv_auth_type_id` INT NOT NULL,
  `status` VARCHAR(32) NOT NULL,
  `validity_period` INT NOT NULL,
  `withdrawn_reason` VARCHAR(32) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_irfo_psv_auth_user1_idx` (`created_by` ASC),
  INDEX `fk_irfo_psv_auth_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_irfo_psv_auth_organisation1_idx` (`organisation_id` ASC),
  INDEX `fk_irfo_psv_auth_ref_data1_idx` (`journey_frequency` ASC),
  INDEX `fk_irfo_psv_auth_irfo_psv_auth_type1_idx` (`irfo_psv_auth_type_id` ASC),
  INDEX `fk_irfo_psv_auth_ref_data2_idx` (`status` ASC),
  INDEX `fk_irfo_psv_auth_ref_data3_idx` (`withdrawn_reason` ASC),
  CONSTRAINT `fk_irfo_psv_auth_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_psv_auth_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_psv_auth_organisation1`
    FOREIGN KEY (`organisation_id`)
    REFERENCES `organisation` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_psv_auth_ref_data1`
    FOREIGN KEY (`journey_frequency`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_psv_auth_irfo_psv_auth_type1`
    FOREIGN KEY (`irfo_psv_auth_type_id`)
    REFERENCES `irfo_psv_auth_type` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_psv_auth_ref_data2`
    FOREIGN KEY (`status`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_psv_auth_ref_data3`
    FOREIGN KEY (`withdrawn_reason`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `note`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `note` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `comment` VARCHAR(4000) NOT NULL,
  `priority` TINYINT(1) NOT NULL DEFAULT 0,
  `note_type` VARCHAR(32) NOT NULL,
  `application_id` INT NULL,
  `licence_id` INT NULL,
  `case_id` INT NULL,
  `irfo_gv_permit_id` INT NULL,
  `irfo_psv_auth_id` INT NULL,
  `bus_reg_id` INT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_note_application1_idx` (`application_id` ASC),
  INDEX `fk_note_licence1_idx` (`licence_id` ASC),
  INDEX `fk_note_case1_idx` (`case_id` ASC),
  INDEX `fk_note_irfo_gv_permit1_idx` (`irfo_gv_permit_id` ASC),
  INDEX `fk_note_irfo_psv_auth1_idx` (`irfo_psv_auth_id` ASC),
  INDEX `fk_note_user1_idx` (`created_by` ASC),
  INDEX `fk_note_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_note_ref_data1_idx` (`note_type` ASC),
  INDEX `fk_note_bus_reg1_idx` (`bus_reg_id` ASC),
  CONSTRAINT `fk_note_application1`
    FOREIGN KEY (`application_id`)
    REFERENCES `application` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_note_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_note_case1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_note_irfo_gv_permit1`
    FOREIGN KEY (`irfo_gv_permit_id`)
    REFERENCES `irfo_gv_permit` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_note_irfo_psv_auth1`
    FOREIGN KEY (`irfo_psv_auth_id`)
    REFERENCES `irfo_psv_auth` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_note_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_note_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_note_ref_data1`
    FOREIGN KEY (`note_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_note_bus_reg1`
    FOREIGN KEY (`bus_reg_id`)
    REFERENCES `bus_reg` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `submission_section_comment`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `submission_section_comment` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `comment` TEXT NULL,
  `submission_id` INT NOT NULL,
  `submission_section` VARCHAR(32) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_submission_section_submission1_idx` (`submission_id` ASC),
  INDEX `fk_submission_section_comment_ref_data1_idx` (`submission_section` ASC),
  INDEX `fk_submission_section_comment_user1_idx` (`created_by` ASC),
  INDEX `fk_submission_section_comment_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_submission_section_submission1`
    FOREIGN KEY (`submission_id`)
    REFERENCES `submission` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_submission_section_comment_ref_data1`
    FOREIGN KEY (`submission_section`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_submission_section_comment_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_submission_section_comment_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `submission`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `submission` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `case_id` INT NOT NULL,
  `submission_type` VARCHAR(32) NOT NULL,
  `data_snapshot` TEXT NULL COMMENT 'Contains data for each submission section concatenated togather as a JSon string.',
  `closed_date` DATETIME NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_submission_case1_idx` (`case_id` ASC),
  INDEX `fk_submission_user1_idx` (`created_by` ASC),
  INDEX `fk_submission_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_submission_ref_data1_idx` (`submission_type` ASC),
  CONSTRAINT `fk_submission_case1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_submission_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_submission_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_submission_ref_data1`
    FOREIGN KEY (`submission_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `submission_action`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `submission_action` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `is_decision` TINYINT(1) NOT NULL,
  `comment` VARCHAR(4000) NULL,
  `urgent` TINYINT(1) NULL,
  `submission_id` INT NOT NULL,
  `sender_user_id` INT NOT NULL,
  `recipient_user_id` INT NOT NULL,
  `submission_action_status` VARCHAR(100) NOT NULL,
  `submission_action_type` VARCHAR(45) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_submission_action_user1_idx` (`sender_user_id` ASC),
  INDEX `fk_submission_action_user2_idx` (`recipient_user_id` ASC),
  INDEX `fk_submission_action_user3_idx` (`created_by` ASC),
  INDEX `fk_submission_action_user4_idx` (`last_modified_by` ASC),
  INDEX `fk_submission_action_submission1_idx` (`submission_id` ASC),
  CONSTRAINT `fk_submission_action_user1`
    FOREIGN KEY (`sender_user_id`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_submission_action_user2`
    FOREIGN KEY (`recipient_user_id`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_submission_action_user3`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_submission_action_user4`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_submission_action_submission1`
    FOREIGN KEY (`submission_id`)
    REFERENCES `submission` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `application_completion`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `application_completion` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `application_id` INT NOT NULL,
  `type_of_licence_status` INT NULL,
  `business_type_status` INT NULL,
  `business_details_status` INT NULL,
  `addresses_status` INT NULL,
  `people_status` INT NULL,
  `taxi_phv_status` INT NULL,
  `operating_centres_status` INT NULL,
  `financial_evidence_status` INT NULL,
  `transport_managers_status` INT NULL,
  `vehicles_status` INT NULL,
  `vehicles_psv_status` INT NULL,
  `vehicles_declarations_status` INT NULL,
  `discs_status` INT NULL,
  `community_licences_status` INT NULL,
  `safety_status` INT NULL,
  `conditions_undertakings_status` INT NULL,
  `financial_history_status` INT NULL,
  `licence_history_status` INT NULL,
  `convictions_penalties_status` INT NULL,
  `last_section` VARCHAR(255) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `fk_application_completion_application_id_udx` (`application_id` ASC),
  INDEX `fk_application_completion_user1_idx` (`created_by` ASC),
  INDEX `fk_application_completion_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_application_completion_application1`
    FOREIGN KEY (`application_id`)
    REFERENCES `application` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_application_completion_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_application_completion_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `presiding_tc`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `presiding_tc` (
  `id` INT NOT NULL,
  `name` VARCHAR(70) NOT NULL,
  `deleted` TINYINT(1) NULL DEFAULT 0,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pi_venue`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `pi_venue` (
  `id` INT NOT NULL,
  `name` VARCHAR(70) NOT NULL,
  `address_id` INT NOT NULL,
  `traffic_area_id` VARCHAR(1) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_pi_venue_address1_idx` (`address_id` ASC),
  INDEX `fk_pi_venue_user1_idx` (`created_by` ASC),
  INDEX `fk_pi_venue_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_pi_venue_traffic_area1_idx` (`traffic_area_id` ASC),
  CONSTRAINT `fk_pi_venue_address1`
    FOREIGN KEY (`address_id`)
    REFERENCES `address` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_venue_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_venue_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_venue_traffic_area1`
    FOREIGN KEY (`traffic_area_id`)
    REFERENCES `traffic_area` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `impounding`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `impounding` (
  `id` INT NOT NULL,
  `impounding_type` VARCHAR(32) NOT NULL,
  `case_id` INT NOT NULL,
  `hearing_date` DATETIME NULL,
  `application_receipt_date` DATETIME NULL,
  `outcome_sent_date` DATETIME NULL,
  `presiding_tc_id` INT NULL,
  `outcome` VARCHAR(32) NULL COMMENT 'Vehicle(s) returned or not returned',
  `notes` VARCHAR(4000) NULL,
  `close_date` DATETIME NULL,
  `pi_venue_id` INT NULL,
  `pi_venue_other` VARCHAR(255) NULL,
  `vrm` VARCHAR(20) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_impounding_user1_idx` (`created_by` ASC),
  INDEX `fk_impounding_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_impounding_transport_commissioner1_idx` (`presiding_tc_id` ASC),
  INDEX `fk_impounding_ref_data1_idx` (`outcome` ASC),
  INDEX `fk_impounding_ref_data2_idx` (`impounding_type` ASC),
  INDEX `fk_impounding_cases1_idx` (`case_id` ASC),
  INDEX `fk_impounding_pi_venue1_idx` (`pi_venue_id` ASC),
  CONSTRAINT `fk_impounding_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_impounding_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_impounding_transport_commissioner1`
    FOREIGN KEY (`presiding_tc_id`)
    REFERENCES `presiding_tc` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_impounding_ref_data1`
    FOREIGN KEY (`outcome`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_impounding_ref_data2`
    FOREIGN KEY (`impounding_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_impounding_cases1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_impounding_pi_venue1`
    FOREIGN KEY (`pi_venue_id`)
    REFERENCES `pi_venue` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `system_parameter`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `system_parameter` (
  `id` VARCHAR(32) NOT NULL,
  `param_value` VARCHAR(32) NULL,
  `description` VARCHAR(255) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `condition_undertaking`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `condition_undertaking` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `added_via` VARCHAR(32) NULL COMMENT 'Episode, Application or Licence',
  `attached_to` VARCHAR(32) NULL COMMENT 'Licence or Operating Centre',
  `condition_type` VARCHAR(32) NOT NULL COMMENT 'Condition or Undertaking',
  `condition_date` DATETIME NULL,
  `deleted_date` DATETIME NULL,
  `is_draft` TINYINT(1) NOT NULL DEFAULT 0,
  `case_id` INT NULL,
  `is_fulfilled` TINYINT(1) NOT NULL DEFAULT 0,
  `licence_id` INT NULL,
  `notes` VARCHAR(8000) NULL,
  `operating_centre_id` INT NULL,
  `application_id` INT NULL,
  `lic_condition_variation_id` INT NULL,
  `is_approved` TINYINT(1) NOT NULL DEFAULT 0,
  `approval_user_id` INT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_Condition_ref_data1_idx` (`added_via` ASC),
  INDEX `fk_Condition_ref_data2_idx` (`attached_to` ASC),
  INDEX `fk_Condition_ref_data3_idx` (`condition_type` ASC),
  INDEX `fk_Condition_cases1_idx` (`case_id` ASC),
  INDEX `fk_Condition_licence1_idx` (`licence_id` ASC),
  INDEX `fk_Condition_operating_centre1_idx` (`operating_centre_id` ASC),
  INDEX `fk_condition_undertaking_application1_idx` (`application_id` ASC),
  INDEX `fk_condition_undertaking_user1_idx` (`created_by` ASC),
  INDEX `fk_condition_undertaking_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_condition_undertaking_condition_undertaking1_idx` (`lic_condition_variation_id` ASC),
  INDEX `fk_condition_undertaking_user3_idx` (`approval_user_id` ASC),
  CONSTRAINT `fk_Condition_ref_data1`
    FOREIGN KEY (`added_via`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Condition_ref_data2`
    FOREIGN KEY (`attached_to`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Condition_ref_data3`
    FOREIGN KEY (`condition_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Condition_cases1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Condition_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Condition_operating_centre1`
    FOREIGN KEY (`operating_centre_id`)
    REFERENCES `operating_centre` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_condition_undertaking_application1`
    FOREIGN KEY (`application_id`)
    REFERENCES `application` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_condition_undertaking_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_condition_undertaking_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_condition_undertaking_condition_undertaking1`
    FOREIGN KEY (`lic_condition_variation_id`)
    REFERENCES `condition_undertaking` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_condition_undertaking_user3`
    FOREIGN KEY (`approval_user_id`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `s4_condition`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `s4_condition` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `source_condition_id` INT NOT NULL,
  `target_condition_id` INT NOT NULL,
  `s4_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_s4_condition_Condition1_idx` (`source_condition_id` ASC),
  INDEX `fk_s4_condition_Condition2_idx` (`target_condition_id` ASC),
  INDEX `fk_s4_condition_s41_idx` (`s4_id` ASC),
  CONSTRAINT `fk_s4_condition_Condition1`
    FOREIGN KEY (`source_condition_id`)
    REFERENCES `condition_undertaking` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_s4_condition_Condition2`
    FOREIGN KEY (`target_condition_id`)
    REFERENCES `condition_undertaking` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_s4_condition_s41`
    FOREIGN KEY (`s4_id`)
    REFERENCES `s4` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `previous_licence`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `previous_licence` (
  `id` INT NOT NULL,
  `application_id` INT NOT NULL,
  `lic_no` VARCHAR(18) NULL,
  `holder_name` VARCHAR(90) NULL,
  `purchase_date` DATE NULL,
  `will_surrender` TINYINT(1) NULL,
  `disqualification_date` DATE NULL,
  `disqualification_length` VARCHAR(255) NULL,
  `previous_licence_type` VARCHAR(32) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  INDEX `fk_previous_licence_application1_idx` (`application_id` ASC),
  PRIMARY KEY (`id`),
  INDEX `fk_previous_licence_ref_data1_idx` (`previous_licence_type` ASC),
  INDEX `fk_previous_licence_user1_idx` (`created_by` ASC),
  INDEX `fk_previous_licence_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_previous_licence_application1`
    FOREIGN KEY (`application_id`)
    REFERENCES `application` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_previous_licence_ref_data1`
    FOREIGN KEY (`previous_licence_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_previous_licence_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_previous_licence_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `organisation_user`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `organisation_user` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `organisation_id` INT NOT NULL,
  `user_id` INT NOT NULL,
  `is_administrator` TINYINT(1) NOT NULL DEFAULT 0,
  `added_date` DATETIME NULL,
  `removed_date` DATETIME NULL,
  `sftp_access` TINYINT(1) NOT NULL DEFAULT 0,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_organisation_has_user_user1_idx` (`user_id` ASC),
  INDEX `fk_organisation_has_user_organisation1_idx` (`organisation_id` ASC),
  INDEX `fk_organisation_user_user1_idx` (`created_by` ASC),
  INDEX `fk_organisation_user_user2_idx` (`last_modified_by` ASC),
  UNIQUE INDEX `organisation_user_unique` (`organisation_id` ASC, `user_id` ASC),
  CONSTRAINT `fk_organisation_has_user_organisation1`
    FOREIGN KEY (`organisation_id`)
    REFERENCES `organisation` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_organisation_has_user_user1`
    FOREIGN KEY (`user_id`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_organisation_user_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_organisation_user_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `propose_to_revoke`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `propose_to_revoke` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `case_id` INT NOT NULL,
  `presiding_tc_id` INT NOT NULL,
  `ptr_agreed_date` DATETIME NULL,
  `closed_date` DATETIME NULL,
  `comment` VARCHAR(4000) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_propose_to_revoke_cases1_idx` (`case_id` ASC),
  INDEX `fk_propose_to_revoke_presiding_tc1_idx` (`presiding_tc_id` ASC),
  INDEX `fk_propose_to_revoke_user1_idx` (`created_by` ASC),
  INDEX `fk_propose_to_revoke_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_propose_to_revoke_cases1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_propose_to_revoke_presiding_tc1`
    FOREIGN KEY (`presiding_tc_id`)
    REFERENCES `presiding_tc` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_propose_to_revoke_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_propose_to_revoke_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `reason`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `reason` (
  `id` INT NOT NULL,
  `goods_or_psv` VARCHAR(32) NOT NULL,
  `section_code` VARCHAR(50) NOT NULL,
  `description` VARCHAR(255) NOT NULL,
  `is_read_only` TINYINT(1) NOT NULL,
  `is_ni` TINYINT(1) NOT NULL COMMENT 'Northern Ireland or not',
  `is_propose_to_revoke` TINYINT(1) NOT NULL COMMENT 'Used in Propose to Revoke',
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_pi_reason_user1_idx` (`created_by` ASC),
  INDEX `fk_pi_reason_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_reason_ref_data1_idx` (`goods_or_psv` ASC),
  CONSTRAINT `fk_pi_reason_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_reason_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_reason_ref_data1`
    FOREIGN KEY (`goods_or_psv`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pi`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `pi` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `agreed_by_tc_id` INT NULL,
  `decided_by_tc_id` INT NULL,
  `agreed_by_tc_role` VARCHAR(32) NULL,
  `decided_by_tc_role` VARCHAR(32) NULL,
  `case_id` INT NOT NULL,
  `agreed_date` DATE NULL,
  `witnesses` INT NULL,
  `is_cancelled` TINYINT(1) NOT NULL DEFAULT 0,
  `pi_status` VARCHAR(32) NOT NULL,
  `is_adjourned` TINYINT(1) NOT NULL DEFAULT 0,
  `section_code_text` VARCHAR(1024) NULL COMMENT 'Populated from definitions.',
  `reschedule_datetime` DATETIME NULL COMMENT 'Entered if is_adjourned.  Holds last reschedule date',
  `decision_date` DATE NULL,
  `licence_revoked_at_pi` TINYINT(1) NOT NULL DEFAULT 0,
  `notification_date` DATE NULL,
  `decision_notes` TEXT NULL,
  `deleted_date` DATETIME NULL,
  `assigned_to` INT NULL,
  `comment` VARCHAR(4000) NULL,
  `call_up_letter_date` DATE NULL,
  `brief_to_tc_date` DATE NULL,
  `written_outcome` VARCHAR(32) NULL,
  `written_reason_date` DATE NULL,
  `decision_letter_sent_date` DATE NULL,
  `tc_written_decision_date` DATE NULL,
  `tc_written_reason_date` DATE NULL,
  `written_reason_letter_date` DATE NULL,
  `dec_sent_after_written_dec_date` DATE NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_pi_detail_cases1_idx` (`case_id` ASC),
  INDEX `fk_pi_detail_ref_data2_idx` (`pi_status` ASC),
  INDEX `fk_pi_detail_user1_idx` (`created_by` ASC),
  INDEX `fk_pi_detail_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_pi_user1_idx` (`assigned_to` ASC),
  INDEX `fk_pi_presiding_tc1_idx` (`agreed_by_tc_id` ASC),
  INDEX `fk_pi_presiding_tc2_idx` (`decided_by_tc_id` ASC),
  INDEX `fk_pi_ref_data1_idx` (`agreed_by_tc_role` ASC),
  INDEX `fk_pi_ref_data2_idx` (`decided_by_tc_role` ASC),
  INDEX `fk_pi_ref_data3_idx` (`written_outcome` ASC),
  CONSTRAINT `fk_pi_detail_cases1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_detail_ref_data2`
    FOREIGN KEY (`pi_status`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_detail_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_detail_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_user1`
    FOREIGN KEY (`assigned_to`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_presiding_tc1`
    FOREIGN KEY (`agreed_by_tc_id`)
    REFERENCES `presiding_tc` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_presiding_tc2`
    FOREIGN KEY (`decided_by_tc_id`)
    REFERENCES `presiding_tc` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_ref_data1`
    FOREIGN KEY (`agreed_by_tc_role`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_ref_data2`
    FOREIGN KEY (`decided_by_tc_role`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_ref_data3`
  FOREIGN KEY (`written_outcome`)
  REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `ptr_reason`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ptr_reason` (
  `propose_to_revoke_id` INT NOT NULL,
  `reason_id` INT NOT NULL,
  INDEX `fk_propose_to_revoke_has_pi_reason_pi_reason1_idx` (`reason_id` ASC),
  INDEX `fk_propose_to_revoke_has_pi_reason_propose_to_revoke1_idx` (`propose_to_revoke_id` ASC),
  PRIMARY KEY (`propose_to_revoke_id`, `reason_id`),
  CONSTRAINT `fk_propose_to_revoke_has_pi_reason_propose_to_revoke1`
    FOREIGN KEY (`propose_to_revoke_id`)
    REFERENCES `propose_to_revoke` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_propose_to_revoke_has_pi_reason_pi_reason1`
    FOREIGN KEY (`reason_id`)
    REFERENCES `reason` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `legacy_case_action`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `legacy_case_action` (
  `id` INT NOT NULL,
  `description` VARCHAR(45) NULL,
  `is_driver` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `legacy_recommendation`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `legacy_recommendation` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `rec_date` DATETIME NOT NULL,
  `case_id` INT NOT NULL,
  `pi_reason` VARCHAR(255) NULL,
  `from_user_id` INT NULL,
  `to_user_id` INT NULL,
  `comment` VARCHAR(4000) NULL,
  `action_id` INT NOT NULL,
  `effective_date` DATE NULL,
  `notes` TEXT NULL,
  `pi_decision` VARCHAR(255) NULL,
  `request` VARCHAR(20) NULL,
  `revoke_lic` TINYINT(1) NULL,
  `status` TINYINT(1) NULL,
  `total_points` INT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_case_recommendation_cases1_idx` (`case_id` ASC),
  INDEX `fk_case_recommendation_user1_idx` (`from_user_id` ASC),
  INDEX `fk_case_recommendation_user2_idx` (`to_user_id` ASC),
  INDEX `fk_legacy_recommendation_legacy_case_action1_idx` (`action_id` ASC),
  INDEX `fk_legacy_recommendation_user1_idx` (`created_by` ASC),
  INDEX `fk_legacy_recommendation_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_case_recommendation_cases1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_case_recommendation_user1`
    FOREIGN KEY (`from_user_id`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_case_recommendation_user2`
    FOREIGN KEY (`to_user_id`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_legacy_recommendation_legacy_case_action1`
    FOREIGN KEY (`action_id`)
    REFERENCES `legacy_case_action` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_legacy_recommendation_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_legacy_recommendation_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pi_definition_category`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `pi_definition` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `pi_definition_category` VARCHAR(32) NOT NULL,
  `section_code` VARCHAR(20) NOT NULL,
  `description` VARCHAR(255) NOT NULL,
  `is_ni` TINYINT(1) NOT NULL,
  `goods_or_psv` VARCHAR(32) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_pi_definition_ref_data1_idx` (`goods_or_psv` ASC),
  INDEX `fk_pi_definition_user1_idx` (`created_by` ASC),
  INDEX `fk_pi_definition_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_pi_definition_ref_data1`
    FOREIGN KEY (`goods_or_psv`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_definition_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_definition_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pi_hearing`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `pi_hearing` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `pi_id` INT NOT NULL,
  `hearing_date` DATETIME NULL,
  `presiding_tc_id` INT NULL,
  `presiding_tc_other` VARCHAR(45) NULL,
  `presided_by_role` VARCHAR(32) NULL,
  `pi_venue_id` INT NULL,
  `pi_venue_other` VARCHAR(255) NULL,
  `witnesses` INT NOT NULL DEFAULT 0,
  `is_cancelled` TINYINT(1) NOT NULL DEFAULT 0,
  `cancelled_reason` VARCHAR(4000) NULL,
  `cancelled_date` DATE NULL,
  `is_adjourned` TINYINT(1) NOT NULL DEFAULT 0,
  `adjourned_reason` VARCHAR(4000) NULL,
  `adjourned_date` DATE NULL,
  `details` VARCHAR(4000) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_pi_reschedule_dates_pi_detail1_idx` (`pi_id` ASC),
  INDEX `fk_pi_reschedule_dates_presiding_tc1_idx` (`presiding_tc_id` ASC),
  INDEX `fk_pi_reschedule_date_user1_idx` (`created_by` ASC),
  INDEX `fk_pi_reschedule_date_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_pi_hearing_ref_data1_idx` (`presided_by_role` ASC),
  INDEX `fk_pi_hearing_pi_venue1_idx` (`pi_venue_id` ASC),
  CONSTRAINT `fk_pi_reschedule_dates_pi_detail1`
    FOREIGN KEY (`pi_id`)
    REFERENCES `pi` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_reschedule_dates_presiding_tc1`
    FOREIGN KEY (`presiding_tc_id`)
    REFERENCES `presiding_tc` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_reschedule_date_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_reschedule_date_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_hearing_ref_data1`
    FOREIGN KEY (`presided_by_role`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_hearing_pi_venue1`
    FOREIGN KEY (`pi_venue_id`)
    REFERENCES `pi_venue` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `publication`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `publication` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `publication_no` INT NOT NULL,
  `traffic_area_id` VARCHAR(1) NOT NULL,
  `pub_type` VARCHAR(3) NOT NULL COMMENT 'Either A&D or N&P',
  `pub_date` DATE NULL,
  `pub_status` VARCHAR(32) NOT NULL,
  `doc_name` VARCHAR(255) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_publication_traffic_area1_idx` (`traffic_area_id` ASC),
  INDEX `fk_publication_ref_data1_idx` (`pub_status` ASC),
  INDEX `fk_publication_user1_idx` (`created_by` ASC),
  INDEX `fk_publication_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_publication_traffic_area1`
    FOREIGN KEY (`traffic_area_id`)
    REFERENCES `traffic_area` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_publication_ref_data1`
    FOREIGN KEY (`pub_status`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_publication_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_publication_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `publication_section`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `publication_section` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `description` VARCHAR(70) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_publication_section_user1_idx` (`created_by` ASC),
  INDEX `fk_publication_section_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_publication_section_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_publication_section_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `tm_pi_hearing`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `tm_pi_hearing` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `case_id` INT NOT NULL,
  `witnesses` INT NOT NULL DEFAULT 0,
  `adjourned_date` DATE NULL,
  `agreed_date` DATE NULL,
  `cancelled_date` DATE NULL,
  `deleted_date` DATETIME NULL,
  `scheduled_on` DATETIME NULL,
  `rescheduled_on` DATETIME NULL,
  `presided_by` VARCHAR(32) NULL,
  `reason_id` VARCHAR(32) NOT NULL,
  `type_id` VARCHAR(32) NOT NULL,
  `presiding_tc_id` INT NOT NULL,
  `venue_id` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_tm_pi_hearing_cases1_idx` (`case_id` ASC),
  INDEX `fk_tm_pi_hearing_ref_data1_idx` (`presided_by` ASC),
  INDEX `fk_tm_pi_hearing_ref_data2_idx` (`reason_id` ASC),
  INDEX `fk_tm_pi_hearing_ref_data3_idx` (`type_id` ASC),
  INDEX `fk_tm_pi_hearing_presiding_tc1_idx` (`presiding_tc_id` ASC),
  INDEX `fk_tm_pi_hearing_user1_idx` (`created_by` ASC),
  INDEX `fk_tm_pi_hearing_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_tm_pi_hearing_pi_venue1_idx` (`venue_id` ASC),
  CONSTRAINT `fk_tm_pi_hearing_cases1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tm_pi_hearing_ref_data1`
    FOREIGN KEY (`presided_by`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tm_pi_hearing_ref_data2`
    FOREIGN KEY (`reason_id`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tm_pi_hearing_ref_data3`
    FOREIGN KEY (`type_id`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tm_pi_hearing_presiding_tc1`
    FOREIGN KEY (`presiding_tc_id`)
    REFERENCES `presiding_tc` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tm_pi_hearing_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tm_pi_hearing_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tm_pi_hearing_pi_venue1`
    FOREIGN KEY (`venue_id`)
    REFERENCES `pi_venue` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `publication_link`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `publication_link` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `publication_id` INT NOT NULL,
  `publication_no` INT NOT NULL,
  `traffic_area_id` VARCHAR(1) NOT NULL,
  `pub_type` VARCHAR(3) NOT NULL COMMENT 'Either A&D or N&P',
  `licence_id` INT NULL,
  `application_id` INT NULL,
  `pi_id` INT NULL,
  `tm_pi_hearing_id` INT NULL,
  `section_id` INT NULL,
  `bus_reg_id` INT NULL,
  `text1` TEXT NULL,
  `text2` TEXT NULL,
  `text3` TEXT NULL,
  `publication_section_id` INT NOT NULL,
  `orig_pub_date` DATE NULL,
  `deleted_date` DATETIME NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  INDEX `fk_publication_has_licence_licence1_idx` (`licence_id` ASC),
  INDEX `fk_publication_has_licence_publication1_idx` (`publication_id` ASC),
  INDEX `fk_licence_publication_pi_detail1_idx` (`pi_id` ASC),
  PRIMARY KEY (`id`),
  INDEX `fk_licence_publication_traffic_area1_idx` (`traffic_area_id` ASC),
  INDEX `fk_licence_publication_application1_idx` (`application_id` ASC),
  INDEX `fk_licence_publication_bus_reg1_idx` (`bus_reg_id` ASC),
  INDEX `fk_licence_publication_publication_section1_idx` (`publication_section_id` ASC),
  INDEX `fk_licence_publication_user1_idx` (`created_by` ASC),
  INDEX `fk_licence_publication_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_licence_publication_tm_pi_hearing1_idx` (`tm_pi_hearing_id` ASC),
  CONSTRAINT `fk_publication_has_licence_publication1`
    FOREIGN KEY (`publication_id`)
    REFERENCES `publication` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_publication_has_licence_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_publication_pi_detail1`
    FOREIGN KEY (`pi_id`)
    REFERENCES `pi` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_publication_traffic_area1`
    FOREIGN KEY (`traffic_area_id`)
    REFERENCES `traffic_area` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_publication_application1`
    FOREIGN KEY (`application_id`)
    REFERENCES `application` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_publication_bus_reg1`
    FOREIGN KEY (`bus_reg_id`)
    REFERENCES `bus_reg` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_publication_publication_section1`
    FOREIGN KEY (`publication_section_id`)
    REFERENCES `publication_section` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_publication_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_publication_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_publication_tm_pi_hearing1`
    FOREIGN KEY (`tm_pi_hearing_id`)
    REFERENCES `tm_pi_hearing` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licence_no_gen`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licence_no_gen` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `licence_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_licence_no_gen_licence1_idx` (`licence_id` ASC),
  CONSTRAINT `fk_licence_no_gen_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `printer`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `printer` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `printer_tray` VARCHAR(45) NULL,
  `printer_name` VARCHAR(45) NULL,
  `description` VARCHAR(255) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `team_printer`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `team_printer` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `team_id` INT NOT NULL,
  `printer_id` INT NOT NULL,
  `document_type` VARCHAR(45) NULL,
  INDEX `fk_team_has_printer_printer1_idx` (`printer_id` ASC),
  INDEX `fk_team_has_printer_team1_idx` (`team_id` ASC),
  PRIMARY KEY (`id`),
  CONSTRAINT `fk_team_has_printer_team1`
    FOREIGN KEY (`team_id`)
    REFERENCES `team` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_team_has_printer_printer1`
    FOREIGN KEY (`printer_id`)
    REFERENCES `printer` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `print_queue`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `print_queue` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `team_printer_id` INT NOT NULL,
  `document_id` INT NOT NULL,
  `added_datetime` DATETIME NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_print_queue_team_printer1_idx` (`team_printer_id` ASC),
  INDEX `fk_print_queue_document1_idx` (`document_id` ASC),
  CONSTRAINT `fk_print_queue_team_printer1`
    FOREIGN KEY (`team_printer_id`)
    REFERENCES `team_printer` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_print_queue_document1`
    FOREIGN KEY (`document_id`)
    REFERENCES `document` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `task_sub_category`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `task_sub_category` (
  `id` INT NOT NULL,
  `description` VARCHAR(45) NULL,
  `category_id` INT NOT NULL,
  `name` VARCHAR(45) NOT NULL,
  `is_freetext_description` TINYINT(1) NOT NULL DEFAULT 0,
  PRIMARY KEY (`id`),
  INDEX `fk_task_sub_category_category1_idx` (`category_id` ASC),
  CONSTRAINT `fk_task_sub_category_category1`
    FOREIGN KEY (`category_id`)
    REFERENCES `category` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `task`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `task` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `category_id` INT NOT NULL,
  `task_sub_category_id` INT NOT NULL,
  `assigned_to_user_id` INT NULL,
  `assigned_to_team_id` INT NULL,
  `assigned_by_user_id` INT NULL,
  `is_closed` TINYINT(1) NOT NULL DEFAULT 0,
  `case_id` INT NULL,
  `licence_id` INT NULL,
  `application_id` INT NULL,
  `bus_reg_id` INT NULL,
  `transport_manager_id` INT NULL,
  `description` VARCHAR(4000) NULL,
  `action_date` DATE NULL,
  `irfo_organisation_id` INT NULL,
  `urgent` TINYINT(1) NOT NULL DEFAULT 0,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_task_user1_idx` (`assigned_to_user_id` ASC),
  INDEX `fk_task_team1_idx` (`assigned_to_team_id` ASC),
  INDEX `fk_task_user2_idx` (`assigned_by_user_id` ASC),
  INDEX `fk_task_licence1_idx` (`licence_id` ASC),
  INDEX `fk_task_application1_idx` (`application_id` ASC),
  INDEX `fk_task_bus_reg1_idx` (`bus_reg_id` ASC),
  INDEX `fk_task_transport_manager1_idx` (`transport_manager_id` ASC),
  INDEX `fk_task_organisation1_idx` (`irfo_organisation_id` ASC),
  INDEX `fk_task_user3_idx` (`created_by` ASC),
  INDEX `fk_task_user4_idx` (`last_modified_by` ASC),
  INDEX `fk_task_category1_idx` (`category_id` ASC),
  INDEX `fk_task_task_sub_category1_idx` (`task_sub_category_id` ASC),
  INDEX `fk_task_cases1_idx` (`case_id` ASC),
  CONSTRAINT `fk_task_user1`
    FOREIGN KEY (`assigned_to_user_id`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_task_team1`
    FOREIGN KEY (`assigned_to_team_id`)
    REFERENCES `team` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_task_user2`
    FOREIGN KEY (`assigned_by_user_id`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_task_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_task_application1`
    FOREIGN KEY (`application_id`)
    REFERENCES `application` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_task_bus_reg1`
    FOREIGN KEY (`bus_reg_id`)
    REFERENCES `bus_reg` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_task_transport_manager1`
    FOREIGN KEY (`transport_manager_id`)
    REFERENCES `transport_manager` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_task_organisation1`
    FOREIGN KEY (`irfo_organisation_id`)
    REFERENCES `organisation` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_task_user3`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_task_user4`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_task_category1`
    FOREIGN KEY (`category_id`)
    REFERENCES `category` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_task_task_sub_category1`
    FOREIGN KEY (`task_sub_category_id`)
    REFERENCES `task_sub_category` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_task_cases1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `event_history_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `event_history_type` (
  `id` INT NOT NULL,
  `description` VARCHAR(50) NOT NULL,
  `event_type` VARCHAR(3) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `event_history`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `event_history` (
  `id` INT NOT NULL,
  `event_history_type_id` INT NOT NULL,
  `user_id` INT NOT NULL,
  `licence_id` INT NULL,
  `application_id` INT NULL,
  `licence_vehicle_id` INT NULL,
  `transport_manager_id` INT NULL,
  `team_id` INT NULL,
  `event_datetime` DATETIME NOT NULL,
  `event_description` VARCHAR(255) NULL,
  `entity_type` VARCHAR(45) NULL,
  `entity_pk` INT NULL,
  `entity_version` INT NULL,
  `entity_data` TEXT NULL,
  `operation` VARCHAR(1) NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_event_history_event_history_type1_idx` (`event_history_type_id` ASC),
  INDEX `fk_event_history_user1_idx` (`user_id` ASC),
  INDEX `fk_event_history_licence1_idx` (`licence_id` ASC),
  INDEX `fk_event_history_application1_idx` (`application_id` ASC),
  INDEX `fk_event_history_licence_vehicle1_idx` (`licence_vehicle_id` ASC),
  INDEX `fk_event_history_team1_idx` (`team_id` ASC),
  INDEX `fk_event_history_transport_manager1_idx` (`transport_manager_id` ASC),
  CONSTRAINT `fk_event_history_event_history_type1`
    FOREIGN KEY (`event_history_type_id`)
    REFERENCES `event_history_type` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_event_history_user1`
    FOREIGN KEY (`user_id`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_event_history_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_event_history_application1`
    FOREIGN KEY (`application_id`)
    REFERENCES `application` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_event_history_licence_vehicle1`
    FOREIGN KEY (`licence_vehicle_id`)
    REFERENCES `licence_vehicle` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_event_history_team1`
    FOREIGN KEY (`team_id`)
    REFERENCES `team` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_event_history_transport_manager1`
    FOREIGN KEY (`transport_manager_id`)
    REFERENCES `transport_manager` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `previous_conviction`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `previous_conviction` (
  `id` INT NOT NULL,
  `conviction_date` DATE NULL,
  `title` VARCHAR(32) NULL,
  `forename` VARCHAR(35) NOT NULL,
  `family_name` VARCHAR(35) NOT NULL,
  `birth_date` DATE NULL,
  `category_text` VARCHAR(1024) NULL,
  `notes` VARCHAR(4000) NULL,
  `court_fpn` VARCHAR(70) NULL,
  `penalty` VARCHAR(255) NULL,
  `application_id` INT NOT NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_previous_convictions_application1_idx` (`application_id` ASC),
  CONSTRAINT `fk_previous_convictions_application1`
    FOREIGN KEY (`application_id`)
    REFERENCES `application` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inspection_request`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `inspection_request` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `licence_id` INT NOT NULL,
  `application_id` INT NULL,
  `operating_centre_id` INT NOT NULL,
  `task_id` INT NULL,
  `case_id` INT NULL,
  `requestor_notes` TEXT NULL,
  `inspector_notes` TEXT NULL,
  `due_date` DATE NULL,
  `from_date` DATE NULL,
  `to_date` DATE NULL,
  `request_date` DATE NULL,
  `return_date` DATETIME NULL,
  `deferred_date` DATE NULL,
  `inspector_name` VARCHAR(70) NULL,
  `report_type` VARCHAR(32) NULL,
  `request_type` VARCHAR(32) NOT NULL,
  `result_type` VARCHAR(32) NOT NULL,
  `local_services_no` INT NULL,
  `trailors_examined_no` INT NULL,
  `vehicles_examined_no` INT NULL,
  `requestor_user_id` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_inspection_request_licence1_idx` (`licence_id` ASC),
  INDEX `fk_inspection_request_application1_idx` (`application_id` ASC),
  INDEX `fk_inspection_request_operating_centre1_idx` (`operating_centre_id` ASC),
  INDEX `fk_inspection_request_task1_idx` (`task_id` ASC),
  INDEX `fk_inspection_request_cases1_idx` (`case_id` ASC),
  INDEX `fk_inspection_request_ref_data1_idx` (`report_type` ASC),
  INDEX `fk_inspection_request_ref_data2_idx` (`request_type` ASC),
  INDEX `fk_inspection_request_ref_data3_idx` (`result_type` ASC),
  INDEX `fk_inspection_request_user1_idx` (`requestor_user_id` ASC),
  INDEX `fk_inspection_request_user2_idx` (`created_by` ASC),
  INDEX `fk_inspection_request_user3_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_inspection_request_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_inspection_request_application1`
    FOREIGN KEY (`application_id`)
    REFERENCES `application` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_inspection_request_operating_centre1`
    FOREIGN KEY (`operating_centre_id`)
    REFERENCES `operating_centre` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_inspection_request_task1`
    FOREIGN KEY (`task_id`)
    REFERENCES `task` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_inspection_request_cases1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_inspection_request_ref_data1`
    FOREIGN KEY (`report_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_inspection_request_ref_data2`
    FOREIGN KEY (`request_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_inspection_request_ref_data3`
    FOREIGN KEY (`result_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_inspection_request_user1`
    FOREIGN KEY (`requestor_user_id`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_inspection_request_user2`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_inspection_request_user3`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `inspection_email`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `inspection_email` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `subject` VARCHAR(1024) NOT NULL,
  `message_body` MEDIUMTEXT NULL,
  `email_status` VARCHAR(1) NOT NULL,
  `processed` TINYINT(1) NOT NULL DEFAULT 0,
  `inspection_request_id` INT NOT NULL,
  `sender_email_address` VARCHAR(200) NULL,
  `received_date` DATETIME NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_ea_inspection_email_inspection_request1_idx` (`inspection_request_id` ASC),
  CONSTRAINT `fk_ea_inspection_email_inspection_request1`
    FOREIGN KEY (`inspection_request_id`)
    REFERENCES `inspection_request` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `task_note`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `task_note` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `task_id` INT NOT NULL,
  `note_text` VARCHAR(1800) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_task_note_task1_idx` (`task_id` ASC),
  INDEX `fk_task_note_user1_idx` (`created_by` ASC),
  INDEX `fk_task_note_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_task_note_task1`
    FOREIGN KEY (`task_id`)
    REFERENCES `task` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_task_note_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_task_note_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `private_hire_licence`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `private_hire_licence` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `licence_id` INT NOT NULL,
  `private_hire_licence_no` VARCHAR(10) NOT NULL,
  `contact_details_id` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_hackney_licence_licence1_idx` (`licence_id` ASC),
  INDEX `fk_hackney_licence_contact_details1_idx` (`contact_details_id` ASC),
  INDEX `fk_hackney_licence_user1_idx` (`created_by` ASC),
  INDEX `fk_hackney_licence_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_hackney_licence_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_hackney_licence_contact_details1`
    FOREIGN KEY (`contact_details_id`)
    REFERENCES `contact_details` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_hackney_licence_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_hackney_licence_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bus_reg_other_service`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bus_reg_other_service` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `bus_reg_id` INT NOT NULL,
  `service_no` VARCHAR(70) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_bus_reg_other_service_bus_reg1_idx` (`bus_reg_id` ASC),
  INDEX `fk_bus_reg_other_service_user1_idx` (`created_by` ASC),
  INDEX `fk_bus_reg_other_service_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_bus_reg_other_service_bus_reg1`
    FOREIGN KEY (`bus_reg_id`)
    REFERENCES `bus_reg` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_reg_other_service_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_reg_other_service_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bus_service_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bus_service_type` (
  `id` INT NOT NULL,
  `description` VARCHAR(70) NULL,
  `txc_service_type_name` VARCHAR(70) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `bus_reg_bus_service_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bus_reg_bus_service_type` (
  `bus_reg_id` INT NOT NULL,
  `bus_service_type_id` INT NOT NULL,
  PRIMARY KEY (`bus_reg_id`, `bus_service_type_id`),
  INDEX `fk_bus_reg_bus_service_type_bus_reg1_idx` (`bus_reg_id` ASC),
  CONSTRAINT `fk_bus_reg_bus_service_type_bus_service_type1`
    FOREIGN KEY (`bus_service_type_id`)
    REFERENCES `bus_service_type` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_reg_bus_service_type_bus_reg1`
    FOREIGN KEY (`bus_reg_id`)
    REFERENCES `bus_reg` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `bus_reg_traffic_area`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bus_reg_traffic_area` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `traffic_area_id` VARCHAR(1) NOT NULL,
  `bus_reg_id` INT NOT NULL,
  `txc_missing` TINYINT(1) NULL,
  `txc_not_required` TINYINT(1) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_bus_reg_traffic_area_bus_reg1_idx` (`bus_reg_id` ASC),
  INDEX `fk_bus_reg_traffic_area_user1_idx` (`created_by` ASC),
  INDEX `fk_bus_reg_traffic_area_user2_idx` (`last_modified_by` ASC),
  UNIQUE INDEX `bus_reg_ta_unique` (`traffic_area_id` ASC, `bus_reg_id` ASC),
  CONSTRAINT `fk_bus_reg_traffic_area_traffic_area1`
    FOREIGN KEY (`traffic_area_id`)
    REFERENCES `traffic_area` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_reg_traffic_area_bus_reg1`
    FOREIGN KEY (`bus_reg_id`)
    REFERENCES `bus_reg` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_reg_traffic_area_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_reg_traffic_area_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bus_reg_local_auth`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bus_reg_local_auth` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `bus_reg_id` INT NOT NULL,
  `local_authority_id` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_bus_reg_local_auth_local_authority1_idx` (`local_authority_id` ASC),
  INDEX `fk_bus_reg_local_auth_user1_idx` (`created_by` ASC),
  INDEX `fk_bus_reg_local_auth_user2_idx` (`last_modified_by` ASC),
  UNIQUE INDEX `bus_reg_la_unique` (`local_authority_id` ASC, `bus_reg_id` ASC),
  CONSTRAINT `fk_bus_reg_local_auth_bus_reg1`
    FOREIGN KEY (`bus_reg_id`)
    REFERENCES `bus_reg` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_reg_local_auth_local_authority1`
    FOREIGN KEY (`local_authority_id`)
    REFERENCES `local_authority` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_reg_local_auth_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_reg_local_auth_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bus_short_notice`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bus_short_notice` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `bus_reg_id` INT NOT NULL,
  `bank_holiday_change` TINYINT(1) NOT NULL DEFAULT 0,
  `unforseen_change` TINYINT(1) NOT NULL DEFAULT 0,
  `unforseen_detail` VARCHAR(255) NULL,
  `timetable_change` TINYINT(1) NOT NULL DEFAULT 0,
  `timetable_detail` VARCHAR(255) NULL,
  `replacement_change` TINYINT(1) NOT NULL DEFAULT 0,
  `replacement_detail` VARCHAR(255) NULL,
  `holiday_change` TINYINT(1) NOT NULL DEFAULT 0,
  `holiday_detail` VARCHAR(255) NULL,
  `trc_change` TINYINT(1) NOT NULL DEFAULT 0,
  `trc_detail` VARCHAR(255) NULL,
  `police_change` TINYINT(1) NOT NULL DEFAULT 0,
  `police_detail` VARCHAR(255) NULL,
  `special_occasion_change` TINYINT(1) NOT NULL DEFAULT 0,
  `special_occasion_detail` VARCHAR(255) NULL,
  `connection_change` TINYINT(1) NOT NULL DEFAULT 0,
  `connection_detail` VARCHAR(255) NULL,
  `not_available_change` TINYINT(1) NOT NULL DEFAULT 0,
  `not_available_detail` VARCHAR(255) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_bus_short_notice_user1_idx` (`created_by` ASC),
  INDEX `fk_bus_short_notice_user2_idx` (`last_modified_by` ASC),
  UNIQUE INDEX `bus_reg_id_UNIQUE` (`bus_reg_id` ASC),
  CONSTRAINT `fk_bus_short_notice_bus_reg1`
    FOREIGN KEY (`bus_reg_id`)
    REFERENCES `bus_reg` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_short_notice_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_short_notice_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `recipient`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `recipient` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `send_app_decision` TINYINT(1) NOT NULL DEFAULT 0,
  `send_notices_procs` TINYINT(1) NOT NULL DEFAULT 0,
  `is_police` TINYINT(1) NOT NULL DEFAULT 0,
  `is_objector` TINYINT(1) NOT NULL DEFAULT 0,
  `deleted_date` DATETIME NULL,
  `contact_details_id` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_recipient_contact_details1_idx` (`contact_details_id` ASC),
  INDEX `fk_recipient_user1_idx` (`created_by` ASC),
  INDEX `fk_recipient_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_recipient_contact_details1`
    FOREIGN KEY (`contact_details_id`)
    REFERENCES `contact_details` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_recipient_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_recipient_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `recipient_traffic_area`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `recipient_traffic_area` (
  `recipient_id` INT NOT NULL,
  `traffic_area_id` VARCHAR(1) NOT NULL,
  PRIMARY KEY (`recipient_id`, `traffic_area_id`),
  INDEX `fk_recipient_has_traffic_area_traffic_area1_idx` (`traffic_area_id` ASC),
  INDEX `fk_recipient_has_traffic_area_recipient1_idx` (`recipient_id` ASC),
  CONSTRAINT `fk_recipient_has_traffic_area_recipient1`
    FOREIGN KEY (`recipient_id`)
    REFERENCES `recipient` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_recipient_has_traffic_area_traffic_area1`
    FOREIGN KEY (`traffic_area_id`)
    REFERENCES `traffic_area` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `fee_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `fee_type` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `fee_type` VARCHAR(20) NOT NULL,
  `effective_from` DATE NOT NULL,
  `description` VARCHAR(255) NOT NULL,
  `fixed_value` DECIMAL(10,2) NULL,
  `annual_value` DECIMAL(10,2) NULL,
  `five_year_value` DECIMAL(10,2) NULL,
  `traffic_area_id` CHAR(1) NULL,
  `licence_type` VARCHAR(32) NULL,
  `goods_or_psv` VARCHAR(32) NULL,
  `expire_fee_with_licence` TINYINT(1) NOT NULL DEFAULT 0 COMMENT 'Dont allow payment after licence expires',
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_fee_type_traffic_area1_idx` (`traffic_area_id` ASC),
  INDEX `fk_fee_type_ref_data1_idx` (`licence_type` ASC),
  INDEX `fk_fee_type_ref_data2_idx` (`goods_or_psv` ASC),
  INDEX `fk_fee_type_user1_idx` (`created_by` ASC),
  INDEX `fk_fee_type_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_fee_type_traffic_area1`
    FOREIGN KEY (`traffic_area_id`)
    REFERENCES `traffic_area` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fee_type_ref_data1`
    FOREIGN KEY (`licence_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fee_type_ref_data2`
    FOREIGN KEY (`goods_or_psv`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fee_type_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fee_type_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `waive_reason`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `waive_reason` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `is_irfo` TINYINT(1) NOT NULL DEFAULT 0,
  `description` VARCHAR(255) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_waive_reason_user1_idx` (`created_by` ASC),
  INDEX `fk_waive_reason_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_waive_reason_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_waive_reason_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `fee`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `fee` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `amount` DECIMAL(10,2) NOT NULL,
  `received_amount` DECIMAL(10,2) NULL,
  `application_id` INT NULL,
  `bus_reg_id` INT NULL,
  `licence_id` INT NULL,
  `task_id` INT NULL,
  `invoice_no` INT NULL,
  `invoice_line_no` INT NULL,
  `invoiced_date` DATETIME NULL,
  `received_date` DATETIME NULL,
  `fee_type_id` INT NOT NULL,
  `description` VARCHAR(255) NULL,
  `fee_status` VARCHAR(32) NULL,
  `payment_method` VARCHAR(32) NULL COMMENT 'The method of the successful payment. There could have been several attempts to pay with differing methods, but only one successful.',
  `receipt_no` VARCHAR(45) NULL,
  `parent_fee_id` INT NULL,
  `waive_approval_date` DATETIME NULL,
  `waive_reason` VARCHAR(255) NULL,
  `waive_recommendation_date` DATETIME NULL,
  `waive_recommender_user_id` INT NULL,
  `waive_approver_user_id` INT NULL,
  `waive_reason_id` INT NULL,
  `irfo_fee_id` VARCHAR(10) NULL,
  `irfo_fee_exempt` TINYINT(1) NULL,
  `irfo_file_no` VARCHAR(10) NULL,
  `irfo_gv_permit_id` INT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_fee_application1_idx` (`application_id` ASC),
  INDEX `fk_fee_bus_reg1_idx` (`bus_reg_id` ASC),
  INDEX `fk_fee_licence1_idx` (`licence_id` ASC),
  INDEX `fk_fee_task1_idx` (`task_id` ASC),
  INDEX `fk_fee_fee_type1_idx` (`fee_type_id` ASC),
  INDEX `fk_fee_fee1_idx` (`parent_fee_id` ASC),
  INDEX `fk_fee_user1_idx` (`waive_recommender_user_id` ASC),
  INDEX `fk_fee_user2_idx` (`waive_approver_user_id` ASC),
  INDEX `fk_fee_waive_reason1_idx` (`waive_reason_id` ASC),
  INDEX `fk_fee_user3_idx` (`created_by` ASC),
  INDEX `fk_fee_user4_idx` (`last_modified_by` ASC),
  INDEX `fk_fee_irfo_gv_permit1_idx` (`irfo_gv_permit_id` ASC),
  INDEX `fk_fee_ref_data1_idx` (`fee_status` ASC),
  INDEX `fk_fee_ref_data2_idx` (`payment_method` ASC),
  CONSTRAINT `fk_fee_ref_data1_idx`
    FOREIGN KEY (`fee_status`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fee_ref_data2_idx`
    FOREIGN KEY (`payment_method`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fee_application1`
    FOREIGN KEY (`application_id`)
    REFERENCES `application` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fee_bus_reg1`
    FOREIGN KEY (`bus_reg_id`)
    REFERENCES `bus_reg` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fee_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fee_task1`
    FOREIGN KEY (`task_id`)
    REFERENCES `task` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fee_fee_type1`
    FOREIGN KEY (`fee_type_id`)
    REFERENCES `fee_type` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fee_fee1`
    FOREIGN KEY (`parent_fee_id`)
    REFERENCES `fee` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fee_user1`
    FOREIGN KEY (`waive_recommender_user_id`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fee_user2`
    FOREIGN KEY (`waive_approver_user_id`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fee_waive_reason1`
    FOREIGN KEY (`waive_reason_id`)
    REFERENCES `waive_reason` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fee_user3`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fee_user4`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fee_irfo_gv_permit1`
    FOREIGN KEY (`irfo_gv_permit_id`)
    REFERENCES `irfo_gv_permit` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `payment`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `payment` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `legacy_status` INT NULL,
  `legacy_method` INT NULL,
  `legacy_choice` INT NULL,
  `receipt_document_id` INT NULL,
  `legacy_guid` VARCHAR(255) NULL,
  `completed_date` DATETIME NULL,
  `guid` VARCHAR(255) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_payment_user1_idx` (`created_by` ASC),
  INDEX `fk_payment_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_payment_document1_idx` (`receipt_document_id` ASC),
  CONSTRAINT `fk_payment_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_payment_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_payment_document1`
    FOREIGN KEY (`receipt_document_id`)
    REFERENCES `document` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `fee_payment`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `fee_payment` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `fee_id` INT NOT NULL,
  `payment_id` INT NOT NULL,
  `fee_value` DECIMAL(10,2) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_fee_has_payment_payment1_idx` (`payment_id` ASC),
  INDEX `fk_fee_has_payment_fee1_idx` (`fee_id` ASC),
  INDEX `fk_fee_payment_user1_idx` (`created_by` ASC),
  INDEX `fk_fee_payment_user2_idx` (`last_modified_by` ASC),
  UNIQUE INDEX `fee_payment_unique` (`fee_id` ASC, `payment_id` ASC),
  CONSTRAINT `fk_fee_has_payment_fee1`
    FOREIGN KEY (`fee_id`)
    REFERENCES `fee` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fee_has_payment_payment1`
    FOREIGN KEY (`payment_id`)
    REFERENCES `payment` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fee_payment_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_fee_payment_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ebsr_submission_status`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ebsr_submission_status` (
  `id` INT NOT NULL,
  `description` VARCHAR(45) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ebsr_submission_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ebsr_submission_type` (
  `id` INT NOT NULL,
  `description` VARCHAR(45) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ebsr_submission_result`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ebsr_submission_result` (
  `id` VARCHAR(64) NOT NULL,
  `email_subject` VARCHAR(45) NULL,
  `email_body_template` VARCHAR(255) NULL,
  `email_authority` TINYINT(1) NOT NULL DEFAULT 0,
  `description` VARCHAR(100) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ebsr_submission`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ebsr_submission` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `ebsr_submission_status_id` INT NOT NULL,
  `ebsr_submission_type_id` INT NOT NULL,
  `document_id` INT NULL,
  `submitted_date` DATETIME NULL,
  `licence_no` VARCHAR(7) NULL,
  `organisation_email_address` VARCHAR(100) NULL,
  `application_classification` VARCHAR(32) NULL,
  `variation_no` INT NULL,
  `tan_code` VARCHAR(2) NULL,
  `registration_no` VARCHAR(4) NULL,
  `validation_start` DATETIME NULL,
  `validation_end` DATETIME NULL,
  `publish_start` DATETIME NULL,
  `publish_end` DATETIME NULL,
  `process_start` DATETIME NULL,
  `process_end` DATETIME NULL,
  `bus_reg_id` INT NULL,
  `ebsr_submission_result_id` VARCHAR(64) NULL,
  `distribute_start` DATETIME NULL,
  `distribute_end` DATETIME NULL,
  `distribute_expire` DATETIME NULL,
  `is_from_ftp` TINYINT(1) NOT NULL DEFAULT 0,
  `organisation_id` INT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_ebsr_submission_ebsr_submission_status1_idx` (`ebsr_submission_status_id` ASC),
  INDEX `fk_ebsr_submission_ebsr_submission_type1_idx` (`ebsr_submission_type_id` ASC),
  INDEX `fk_ebsr_submission_document1_idx` (`document_id` ASC),
  INDEX `fk_ebsr_submission_bus_reg1_idx` (`bus_reg_id` ASC),
  INDEX `fk_ebsr_submission_ebsr_submission_result1_idx` (`ebsr_submission_result_id` ASC),
  CONSTRAINT `fk_ebsr_submission_ebsr_submission_status1`
    FOREIGN KEY (`ebsr_submission_status_id`)
    REFERENCES `ebsr_submission_status` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ebsr_submission_ebsr_submission_type1`
    FOREIGN KEY (`ebsr_submission_type_id`)
    REFERENCES `ebsr_submission_type` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ebsr_submission_document1`
    FOREIGN KEY (`document_id`)
    REFERENCES `document` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ebsr_submission_bus_reg1`
    FOREIGN KEY (`bus_reg_id`)
    REFERENCES `bus_reg` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ebsr_submission_ebsr_submission_result1`
    FOREIGN KEY (`ebsr_submission_result_id`)
    REFERENCES `ebsr_submission_result` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `variation_reason`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `variation_reason` (
  `id` INT NOT NULL,
  `description` VARCHAR(45) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `bus_reg_variation_reason`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `bus_reg_variation_reason` (
  `bus_reg_id` INT NOT NULL,
  `variation_reason_id` INT NOT NULL,
  PRIMARY KEY (`bus_reg_id`, `variation_reason_id`),
  INDEX `fk_bus_reg_has_variation_reason_variation_reason1_idx` (`variation_reason_id` ASC),
  INDEX `fk_bus_reg_has_variation_reason_bus_reg1_idx` (`bus_reg_id` ASC),
  CONSTRAINT `fk_bus_reg_has_variation_reason_bus_reg1`
    FOREIGN KEY (`bus_reg_id`)
    REFERENCES `bus_reg` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_bus_reg_has_variation_reason_variation_reason1`
    FOREIGN KEY (`variation_reason_id`)
    REFERENCES `variation_reason` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `template`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `template` (
  `id` INT NOT NULL,
  `data` TEXT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `entity_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `entity_type` (
  `id` INT NOT NULL,
  `name` VARCHAR(45) NOT NULL,
  `current_template_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_entity_type_template1_idx` (`current_template_id` ASC),
  CONSTRAINT `fk_entity_type_template1`
    FOREIGN KEY (`current_template_id`)
    REFERENCES `template` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `history`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `history` (
  `id` INT NOT NULL,
  `data` TEXT NOT NULL,
  `entity_type_id` INT NOT NULL,
  `entity_id` INT NOT NULL,
  `entity_version` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_history_entity1_idx` (`entity_type_id` ASC),
  CONSTRAINT `fk_history_entity1`
    FOREIGN KEY (`entity_type_id`)
    REFERENCES `entity_type` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `history_template`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `history_template` (
  `history_id` INT NOT NULL,
  `template_id` INT NOT NULL,
  PRIMARY KEY (`history_id`, `template_id`),
  INDEX `fk_history_has_template_template1_idx` (`template_id` ASC),
  INDEX `fk_history_has_template_history1_idx` (`history_id` ASC),
  CONSTRAINT `fk_history_has_template_history1`
    FOREIGN KEY (`history_id`)
    REFERENCES `history` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_history_has_template_template1`
    FOREIGN KEY (`template_id`)
    REFERENCES `template` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `alpha_split`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `alpha_split` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `from_inclusive` VARCHAR(2) NULL,
  `to_inclusive` VARCHAR(2) NULL,
  `user_id` INT NOT NULL,
  `traffic_area_id` CHAR(1) NOT NULL,
  `is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_alpha_split_user1_idx` (`user_id` ASC),
  INDEX `fk_alpha_split_traffic_area1_idx` (`traffic_area_id` ASC),
  INDEX `fk_alpha_split_user2_idx` (`created_by` ASC),
  INDEX `fk_alpha_split_user3_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_alpha_split_user1`
    FOREIGN KEY (`user_id`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_alpha_split_traffic_area1`
    FOREIGN KEY (`traffic_area_id`)
    REFERENCES `traffic_area` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_alpha_split_user2`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_alpha_split_user3`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `complaint_oc_licence`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `complaint_oc_licence` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `licence_id` INT NOT NULL,
  `complaint_id` INT NOT NULL,
  `operating_centre_id` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_complaint_oc_licence_licence1_idx` (`licence_id` ASC),
  INDEX `fk_complaint_oc_licence_complaint1_idx` (`complaint_id` ASC),
  INDEX `fk_complaint_oc_licence_operating_centre1_idx` (`operating_centre_id` ASC),
  INDEX `fk_complaint_oc_licence_user1_idx` (`created_by` ASC),
  INDEX `fk_complaint_oc_licence_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_complaint_oc_licence_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_complaint_oc_licence_complaint1`
    FOREIGN KEY (`complaint_id`)
    REFERENCES `complaint` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_complaint_oc_licence_operating_centre1`
    FOREIGN KEY (`operating_centre_id`)
    REFERENCES `operating_centre` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_complaint_oc_licence_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_complaint_oc_licence_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `hearing`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `hearing` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `case_id` INT NOT NULL,
  `venue_id` INT NOT NULL,
  `presiding_tc_id` INT NOT NULL DEFAULT 0,
  `hearing_date` DATETIME NULL,
  `agreed_by_tc_date` DATE NULL,
  `witness_count` INT NOT NULL DEFAULT 0,
  `deleted_date` DATETIME NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_hearing_cases1_idx` (`case_id` ASC),
  INDEX `fk_hearing_pi_venue1_idx` (`venue_id` ASC),
  INDEX `fk_hearing_user1_idx` (`created_by` ASC),
  INDEX `fk_hearing_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_hearing_presiding_tc1_idx` (`presiding_tc_id` ASC),
  CONSTRAINT `fk_hearing_cases1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_hearing_pi_venue1`
    FOREIGN KEY (`venue_id`)
    REFERENCES `pi_venue` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_hearing_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_hearing_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_hearing_presiding_tc1`
    FOREIGN KEY (`presiding_tc_id`)
    REFERENCES `presiding_tc` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `si_category`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `si_category` (
  `id` VARCHAR(8) NOT NULL,
  `description` VARCHAR(255) NULL,
  `deleted_date` DATETIME NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_si_category_user1_idx` (`created_by` ASC),
  INDEX `fk_si_category_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_si_category_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_si_category_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `si_category_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `si_category_type` (
  `id` VARCHAR(8) NOT NULL,
  `description` VARCHAR(255) NULL,
  `deleted_date` DATETIME NULL,
  `si_category_id` VARCHAR(8) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_si_category_type_si_category1_idx` (`si_category_id` ASC),
  INDEX `fk_si_category_type_user1_idx` (`created_by` ASC),
  INDEX `fk_si_category_type_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_si_category_type_si_category1`
    FOREIGN KEY (`si_category_id`)
    REFERENCES `si_category` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_si_category_type_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_si_category_type_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `serious_infringement`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `serious_infringement` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `case_id` INT NOT NULL,
  `check_date` DATE NULL,
  `erru_response_sent` TINYINT(1) NOT NULL DEFAULT 0,
  `erru_response_user_id` INT NULL,
  `erru_response_time` DATETIME NULL,
  `infringement_date` DATE NULL,
  `member_state_code` VARCHAR(8) NULL,
  `notification_number` VARCHAR(36) NULL COMMENT 'ERRU guid',
  `reason` VARCHAR(500) NULL,
  `deleted_date` DATETIME NULL,
  `si_category_id` VARCHAR(8) NOT NULL,
  `si_category_type_id` VARCHAR(8) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_serious_infringement_cases1_idx` (`case_id` ASC),
  INDEX `fk_serious_infringement_user1_idx` (`erru_response_user_id` ASC),
  INDEX `fk_serious_infringement_country1_idx` (`member_state_code` ASC),
  INDEX `fk_serious_infringement_si_category1_idx` (`si_category_id` ASC),
  INDEX `fk_serious_infringement_si_category_type1_idx` (`si_category_type_id` ASC),
  INDEX `fk_serious_infringement_user2_idx` (`created_by` ASC),
  INDEX `fk_serious_infringement_user3_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_serious_infringement_cases1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_serious_infringement_user1`
    FOREIGN KEY (`erru_response_user_id`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_serious_infringement_country1`
    FOREIGN KEY (`member_state_code`)
    REFERENCES `country` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_serious_infringement_si_category1`
    FOREIGN KEY (`si_category_id`)
    REFERENCES `si_category` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_serious_infringement_si_category_type1`
    FOREIGN KEY (`si_category_type_id`)
    REFERENCES `si_category_type` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_serious_infringement_user2`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_serious_infringement_user3`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `legacy_pi_reason`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `legacy_pi_reason` (
  `id` INT NOT NULL,
  `goods_or_psv` VARCHAR(3) NOT NULL COMMENT 'GV or PSV',
  `section_code` VARCHAR(50) NOT NULL,
  `description` VARCHAR(255) NOT NULL,
  `is_read_only` TINYINT(1) NOT NULL,
  `is_ni` TINYINT(1) NOT NULL COMMENT 'Northern Ireland or not',
  `is_decision` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_pi_reason_user1_idx` (`created_by` ASC),
  INDEX `fk_pi_reason_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_pi_reason_user10`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_reason_user20`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `legacy_recommendation_pi_reason`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `legacy_recommendation_pi_reason` (
  `id` INT NOT NULL,
  `comment` VARCHAR(30) NULL,
  `legacy_recommendation_id` INT NOT NULL,
  `legacy_pi_reason_id` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_legacy_recommendation_pi_reason_legacy_recommendation1_idx` (`legacy_recommendation_id` ASC),
  INDEX `fk_legacy_recommendation_pi_reason_user1_idx` (`created_by` ASC),
  INDEX `fk_legacy_recommendation_pi_reason_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_legacy_recommendation_pi_reason_legacy_pi_reason1_idx` (`legacy_pi_reason_id` ASC),
  CONSTRAINT `fk_legacy_recommendation_pi_reason_legacy_recommendation1`
    FOREIGN KEY (`legacy_recommendation_id`)
    REFERENCES `legacy_recommendation` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_legacy_recommendation_pi_reason_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_legacy_recommendation_pi_reason_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_legacy_recommendation_pi_reason_legacy_pi_reason1`
    FOREIGN KEY (`legacy_pi_reason_id`)
    REFERENCES `legacy_pi_reason` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `si_penalty_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `si_penalty_type` (
  `id` VARCHAR(8) NOT NULL,
  `description` VARCHAR(255) NULL,
  `deleted_date` DATETIME NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_si_penalty_type_user1_idx` (`created_by` ASC),
  INDEX `fk_si_penalty_type_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_si_penalty_type_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_si_penalty_type_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `si_penalty_requested_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `si_penalty_requested_type` (
  `id` VARCHAR(8) NOT NULL,
  `description` VARCHAR(255) NULL,
  `deleted_date` DATETIME NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_si_penalty_requested_type_user1_idx` (`created_by` ASC),
  INDEX `fk_si_penalty_requested_type_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_si_penalty_requested_type_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_si_penalty_requested_type_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `si_penalty_imposed_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `si_penalty_imposed_type` (
  `id` VARCHAR(8) NOT NULL,
  `description` VARCHAR(255) NULL,
  `deleted_date` DATETIME NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_si_penalty_imposed_type_user1_idx` (`created_by` ASC),
  INDEX `fk_si_penalty_imposed_type_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_si_penalty_imposed_type_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_si_penalty_imposed_type_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `si_penalty`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `si_penalty` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `serious_infringement_id` INT NOT NULL,
  `imposed` TINYINT(1) NULL,
  `start_date` DATE NULL,
  `end_date` DATE NULL,
  `reason_not_imposed` VARCHAR(500) NULL,
  `deleted_date` DATETIME NULL,
  `si_penalty_type_id` VARCHAR(8) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_si_penalty_serious_infringement1_idx` (`serious_infringement_id` ASC),
  INDEX `fk_si_penalty_si_penalty_type1_idx` (`si_penalty_type_id` ASC),
  INDEX `fk_si_penalty_user1_idx` (`created_by` ASC),
  INDEX `fk_si_penalty_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_si_penalty_serious_infringement1`
    FOREIGN KEY (`serious_infringement_id`)
    REFERENCES `serious_infringement` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_si_penalty_si_penalty_type1`
    FOREIGN KEY (`si_penalty_type_id`)
    REFERENCES `si_penalty_type` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_si_penalty_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_si_penalty_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `si_penalty_erru_requested`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `si_penalty_erru_requested` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `duration` INT NULL,
  `deleted_date` DATETIME NULL,
  `serious_infringement_id` INT NOT NULL,
  `si_penalty_requested_type_id` VARCHAR(8) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_si_penalty_erru_requested_serious_infringement1_idx` (`serious_infringement_id` ASC),
  INDEX `fk_si_penalty_erru_requested_si_penalty_requested_type1_idx` (`si_penalty_requested_type_id` ASC),
  INDEX `fk_si_penalty_erru_requested_user1_idx` (`created_by` ASC),
  INDEX `fk_si_penalty_erru_requested_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_si_penalty_erru_requested_serious_infringement1`
    FOREIGN KEY (`serious_infringement_id`)
    REFERENCES `serious_infringement` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_si_penalty_erru_requested_si_penalty_requested_type1`
    FOREIGN KEY (`si_penalty_requested_type_id`)
    REFERENCES `si_penalty_requested_type` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_si_penalty_erru_requested_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_si_penalty_erru_requested_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `si_penalty_erru_imposed`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `si_penalty_erru_imposed` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `final_decision_date` DATE NULL,
  `start_date` DATE NULL,
  `end_date` DATE NULL,
  `deleted_date` DATETIME NULL,
  `executed` INT NULL,
  `serious_infringement_id` INT NOT NULL,
  `si_penalty_imposed_type_id` VARCHAR(8) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_si_penalty_erru_mposed_user1_idx` (`created_by` ASC),
  INDEX `fk_si_penalty_erru_mposed_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_si_penalty_erru_mposed_serious_infringement1_idx` (`serious_infringement_id` ASC),
  INDEX `fk_si_penalty_erru_mposed_si_penalty_imposed_type1_idx` (`si_penalty_imposed_type_id` ASC),
  CONSTRAINT `fk_si_penalty_erru_mposed_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_si_penalty_erru_mposed_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_si_penalty_erru_mposed_serious_infringement1`
    FOREIGN KEY (`serious_infringement_id`)
    REFERENCES `serious_infringement` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_si_penalty_erru_mposed_si_penalty_imposed_type1`
    FOREIGN KEY (`si_penalty_imposed_type_id`)
    REFERENCES `si_penalty_imposed_type` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `correspondence_inbox`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `correspondence_inbox` (
  `id` INT NOT NULL,
  `archived` TINYINT(1) NULL,
  `accessed` TINYINT(1) NULL,
  `email_reminder_sent` TINYINT(1) NULL,
  `printed` TINYINT(1) NULL,
  `document_id` INT NOT NULL,
  `licence_id` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_correspondence_inbox_document1_idx` (`document_id` ASC),
  INDEX `fk_correspondence_inbox_licence1_idx` (`licence_id` ASC),
  INDEX `fk_correspondence_inbox_user1_idx` (`created_by` ASC),
  INDEX `fk_correspondence_inbox_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_correspondence_inbox_document1`
    FOREIGN KEY (`document_id`)
    REFERENCES `document` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_correspondence_inbox_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_correspondence_inbox_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_correspondence_inbox_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `disc_sequence`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `disc_sequence` (
  `id` INT NOT NULL,
  `goods_or_psv` VARCHAR(32) NOT NULL,
  `restricted` INT NULL,
  `special_restricted` INT NULL,
  `standard_national` INT NULL,
  `standard_international` INT NULL,
  `r_prefix` VARCHAR(3) NULL,
  `sn_prefix` VARCHAR(3) NULL,
  `si_prefix` VARCHAR(3) NULL,
  `sr_prefix` VARCHAR(3) NULL,
  `traffic_area_id` CHAR(1) NULL,
  `is_self_serve` TINYINT(1) NOT NULL DEFAULT 0,
  `is_ni_self_serve` TINYINT(1) NOT NULL DEFAULT 0,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_disc_sequence_ref_data1_idx` (`goods_or_psv` ASC),
  INDEX `fk_disc_sequence_traffic_area1_idx` (`traffic_area_id` ASC),
  INDEX `fk_disc_sequence_user1_idx` (`created_by` ASC),
  INDEX `fk_disc_sequence_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_disc_sequence_ref_data1`
    FOREIGN KEY (`goods_or_psv`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_disc_sequence_traffic_area1`
    FOREIGN KEY (`traffic_area_id`)
    REFERENCES `traffic_area` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_disc_sequence_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_disc_sequence_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `disqualification`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `disqualification` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `is_disqualified` TINYINT(1) NULL,
  `start_date` DATE NULL,
  `notes` VARCHAR(45) NULL,
  `period` INT NOT NULL,
  `person_id` INT NULL,
  `organisation_id` INT NULL,
  `transport_manager_id` INT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_disqualification_person1_idx` (`person_id` ASC),
  INDEX `fk_disqualification_organisation1_idx` (`organisation_id` ASC),
  INDEX `fk_disqualification_transport_manager1_idx` (`transport_manager_id` ASC),
  INDEX `fk_disqualification_user1_idx` (`created_by` ASC),
  INDEX `fk_disqualification_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_disqualification_person1`
    FOREIGN KEY (`person_id`)
    REFERENCES `person` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_disqualification_organisation1`
    FOREIGN KEY (`organisation_id`)
    REFERENCES `organisation` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_disqualification_transport_manager1`
    FOREIGN KEY (`transport_manager_id`)
    REFERENCES `transport_manager` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_disqualification_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_disqualification_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `ebsr_route_reprint`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `ebsr_route_reprint` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `exception_name` VARCHAR(45) NULL,
  `scale` INT NOT NULL DEFAULT 0,
  `published_timestamp` DATETIME NULL,
  `requested_timestamp` DATETIME NOT NULL,
  `bus_reg_id` INT NOT NULL,
  `requested_user_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_ebsr_route_reprint_bus_reg1_idx` (`bus_reg_id` ASC),
  INDEX `fk_ebsr_route_reprint_user1_idx` (`requested_user_id` ASC),
  CONSTRAINT `fk_ebsr_route_reprint_bus_reg1`
    FOREIGN KEY (`bus_reg_id`)
    REFERENCES `bus_reg` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_ebsr_route_reprint_user1`
    FOREIGN KEY (`requested_user_id`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `legacy_offence`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `legacy_offence` (
  `id` INT NOT NULL,
  `definition` VARCHAR(255) NULL,
  `is_trailer` TINYINT(1) NULL,
  `notes` VARCHAR(4000) NULL,
  `num_of_offences` INT NULL,
  `offence_authority` VARCHAR(100) NULL,
  `offence_date` DATE NULL,
  `offence_to_date` DATE NULL,
  `offender_name` VARCHAR(100) NULL,
  `points` INT NULL,
  `position` VARCHAR(100) NULL,
  `offence_type` VARCHAR(100) NULL,
  `vrm` VARCHAR(20) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_legacy_offence_user1_idx` (`created_by` ASC),
  INDEX `fk_legacy_offence_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_legacy_offence_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_legacy_offence_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `legacy_case_offence`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `legacy_case_offence` (
  `case_id` INT NOT NULL,
  `legacy_offence_id` INT NOT NULL,
  INDEX `fk_legacy_case_offence_cases1_idx` (`case_id` ASC),
  INDEX `fk_legacy_case_offence_legacy_offence1_idx` (`legacy_offence_id` ASC),
  PRIMARY KEY (`case_id`, `legacy_offence_id`),
  CONSTRAINT `fk_legacy_case_offence_cases1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_legacy_case_offence_legacy_offence1`
    FOREIGN KEY (`legacy_offence_id`)
    REFERENCES `legacy_offence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `community_lic`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `community_lic` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `licence_id` INT NOT NULL,
  `expired_date` DATE NULL,
  `specified_date` DATETIME NULL,
  `licence_expired_date` DATE NULL,
  `issue_no` INT NULL,
  `serial_no` INT NULL,
  `serial_no_prefix` VARCHAR(4) NULL,
  `status` VARCHAR(10) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_community_lic_licence1_idx` (`licence_id` ASC),
  INDEX `fk_community_lic_user1_idx` (`created_by` ASC),
  INDEX `fk_community_lic_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_community_lic_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_community_lic_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_community_lic_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `community_lic_suspension`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `community_lic_suspension` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `community_lic_id` INT NOT NULL,
  `start_date` DATETIME NULL,
  `end_date` DATETIME NULL,
  `is_actioned` TINYINT(1) NULL DEFAULT 0,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_community_lic_suspension_community_lic1_idx` (`community_lic_id` ASC),
  INDEX `fk_community_lic_suspension_user1_idx` (`created_by` ASC),
  INDEX `fk_community_lic_suspension_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_community_lic_suspension_community_lic1`
    FOREIGN KEY (`community_lic_id`)
    REFERENCES `community_lic` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_community_lic_suspension_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_community_lic_suspension_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `community_lic_withdrawal`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `community_lic_withdrawal` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `community_lic_id` INT NOT NULL,
  `start_date` DATETIME NULL,
  `end_date` DATETIME NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_community_lic_withdrawal_community_lic1_idx` (`community_lic_id` ASC),
  INDEX `fk_community_lic_withdrawal_user1_idx` (`created_by` ASC),
  INDEX `fk_community_lic_withdrawal_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_community_lic_withdrawal_community_lic1`
    FOREIGN KEY (`community_lic_id`)
    REFERENCES `community_lic` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_community_lic_withdrawal_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_community_lic_withdrawal_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `community_lic_suspension_reason_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `community_lic_suspension_reason_type` (
  `id` INT NOT NULL,
  `description` VARCHAR(255) NULL,
  `deleted_date` DATETIME NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_community_lic_suspension_reason_type_user1_idx` (`created_by` ASC),
  INDEX `fk_community_lic_suspension_reason_type_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_community_lic_suspension_reason_type_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_community_lic_suspension_reason_type_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `community_lic_suspension_reason`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `community_lic_suspension_reason` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `community_lic_suspension_id` INT NOT NULL,
  `reason_id` INT NOT NULL,
  `deleted_date` DATETIME NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_community_lic_suspension_reason_community_lic_suspension_idx` (`community_lic_suspension_id` ASC),
  INDEX `fk_community_lic_suspension_reason_community_lic_suspension_idx1` (`reason_id` ASC),
  INDEX `fk_community_lic_suspension_reason_user1_idx` (`created_by` ASC),
  INDEX `fk_community_lic_suspension_reason_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_community_lic_suspension_reason_community_lic_suspension1`
    FOREIGN KEY (`community_lic_suspension_id`)
    REFERENCES `community_lic_suspension` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_community_lic_suspension_reason_community_lic_suspension_r1`
    FOREIGN KEY (`reason_id`)
    REFERENCES `community_lic_suspension_reason_type` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_community_lic_suspension_reason_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_community_lic_suspension_reason_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `community_lic_withdrawal_reason_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `community_lic_withdrawal_reason_type` (
  `id` INT NOT NULL,
  `description` VARCHAR(255) NULL,
  `deleted_date` DATETIME NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_community_lic_withdrawal_reason_type_user1_idx` (`created_by` ASC),
  INDEX `fk_community_lic_withdrawal_reason_type_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_community_lic_withdrawal_reason_type_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_community_lic_withdrawal_reason_type_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `community_lic_withdrawal_reason`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `community_lic_withdrawal_reason` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `community_lic_withdrawal_id` INT NOT NULL,
  `reason_id` INT NOT NULL,
  `deleted_date` DATETIME NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_community_lic_withdrawal_reason_community_lic_withdrawal_idx` (`community_lic_withdrawal_id` ASC),
  INDEX `fk_community_lic_withdrawal_reason_community_lic_withdrawal_idx1` (`reason_id` ASC),
  INDEX `fk_community_lic_withdrawal_reason_user1_idx` (`created_by` ASC),
  INDEX `fk_community_lic_withdrawal_reason_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_community_lic_withdrawal_reason_community_lic_withdrawal1`
    FOREIGN KEY (`community_lic_withdrawal_id`)
    REFERENCES `community_lic_withdrawal` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_community_lic_withdrawal_reason_community_lic_withdrawal_r1`
    FOREIGN KEY (`reason_id`)
    REFERENCES `community_lic_withdrawal_reason_type` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_community_lic_withdrawal_reason_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_community_lic_withdrawal_reason_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `irfo_partner`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `irfo_partner` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `organisation_id` INT NULL,
  `irfo_psv_auth_id` INT NULL,
  `name` VARCHAR(70) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_irfo_partner_organisation1_idx` (`organisation_id` ASC),
  INDEX `fk_irfo_partner_irfo_psv_auth1_idx` (`irfo_psv_auth_id` ASC),
  INDEX `fk_irfo_partner_user1_idx` (`created_by` ASC),
  INDEX `fk_irfo_partner_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_irfo_partner_organisation1`
    FOREIGN KEY (`organisation_id`)
    REFERENCES `organisation` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_partner_irfo_psv_auth1`
    FOREIGN KEY (`irfo_psv_auth_id`)
    REFERENCES `irfo_psv_auth` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_partner_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_partner_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `irfo_permit_stock`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `irfo_permit_stock` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `irfo_gv_permit_id` INT NULL,
  `serial_no` INT NOT NULL,
  `irfo_country_id` INT NOT NULL,
  `valid_for_year` INT NOT NULL,
  `status` VARCHAR(32) NOT NULL,
  `void_return_date` DATE NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_irfo_permit_stock_irfo_gv_permit1_idx` (`irfo_gv_permit_id` ASC),
  INDEX `fk_irfo_permit_stock_irfo_country1_idx` (`irfo_country_id` ASC),
  INDEX `fk_irfo_permit_stock_ref_data1_idx` (`status` ASC),
  INDEX `fk_irfo_permit_stock_user1_idx` (`created_by` ASC),
  INDEX `fk_irfo_permit_stock_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_irfo_permit_stock_irfo_gv_permit1`
    FOREIGN KEY (`irfo_gv_permit_id`)
    REFERENCES `irfo_gv_permit` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_permit_stock_irfo_country1`
    FOREIGN KEY (`irfo_country_id`)
    REFERENCES `irfo_country` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_permit_stock_ref_data1`
    FOREIGN KEY (`status`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_permit_stock_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_permit_stock_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `irfo_transit_country`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `irfo_transit_country` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `description` VARCHAR(45) NOT NULL,
  `irfo_psv_auth_id` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_irfo_transit_country_irfo_psv_auth1_idx` (`irfo_psv_auth_id` ASC),
  INDEX `fk_irfo_transit_country_user1_idx` (`created_by` ASC),
  INDEX `fk_irfo_transit_country_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_irfo_transit_country_irfo_psv_auth1`
    FOREIGN KEY (`irfo_psv_auth_id`)
    REFERENCES `irfo_psv_auth` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_transit_country_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_transit_country_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `irfo_vehicle`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `irfo_vehicle` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `coc_a` TINYINT(1) NOT NULL DEFAULT 0,
  `coc_b` TINYINT(1) NOT NULL DEFAULT 0,
  `coc_c` TINYINT(1) NOT NULL DEFAULT 0,
  `coc_d` TINYINT(1) NOT NULL DEFAULT 0,
  `coc_t` TINYINT(1) NOT NULL DEFAULT 0,
  `vrm` VARCHAR(20) NOT NULL,
  `irfo_psv_auth_id` INT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NULL DEFAULT 1,
  `irfo_gv_permit_id` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_irfo_vehicle_irfo_psv_auth1_idx` (`irfo_psv_auth_id` ASC),
  INDEX `fk_irfo_vehicle_user1_idx` (`created_by` ASC),
  INDEX `fk_irfo_vehicle_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_irfo_vehicle_irfo_gv_permit1_idx` (`irfo_gv_permit_id` ASC),
  CONSTRAINT `fk_irfo_vehicle_irfo_psv_auth1`
    FOREIGN KEY (`irfo_psv_auth_id`)
    REFERENCES `irfo_psv_auth` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_vehicle_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_vehicle_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_irfo_vehicle_irfo_gv_permit1`
    FOREIGN KEY (`irfo_gv_permit_id`)
    REFERENCES `irfo_gv_permit` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `system_info_message`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `system_info_message` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `is_internal` TINYINT(1) NOT NULL,
  `activate_date` DATE NOT NULL,
  `is_deleted` TINYINT(1) NOT NULL DEFAULT 0,
  `description` VARCHAR(1024) NOT NULL,
  `importance` INT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_system_info_message_user1_idx` (`created_by` ASC),
  INDEX `fk_system_info_message_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_system_info_message_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_system_info_message_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `operating_centre_opposition`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `operating_centre_opposition` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `opposition_id` INT NOT NULL,
  `operating_centre_id` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_opposition_operating_centre_opposition1_idx` (`opposition_id` ASC),
  INDEX `fk_opposition_operating_centre_operating_centre1_idx` (`operating_centre_id` ASC),
  INDEX `fk_operating_centre_opposition_user1_idx` (`created_by` ASC),
  INDEX `fk_operating_centre_opposition_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_opposition_operating_centre_opposition1`
    FOREIGN KEY (`opposition_id`)
    REFERENCES `opposition` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_opposition_operating_centre_operating_centre1`
    FOREIGN KEY (`operating_centre_id`)
    REFERENCES `operating_centre` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_operating_centre_opposition_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_operating_centre_opposition_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `opposition_grounds`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `opposition_grounds` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `opposition_id` INT NOT NULL,
  `is_representation` TINYINT(1) NOT NULL DEFAULT 0,
  `grounds` VARCHAR(32) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_opposition_ground_opposition1_idx` (`opposition_id` ASC),
  INDEX `fk_opposition_ground_ref_data1_idx` (`grounds` ASC),
  INDEX `fk_opposition_grounds_user1_idx` (`created_by` ASC),
  INDEX `fk_opposition_grounds_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_opposition_ground_opposition1`
    FOREIGN KEY (`opposition_id`)
    REFERENCES `opposition` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_opposition_ground_ref_data1`
    FOREIGN KEY (`grounds`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_opposition_grounds_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_opposition_grounds_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `tm_case_decision`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `tm_case_decision` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `case_id` INT NOT NULL,
  `decision_date` DATE NULL,
  `notified_date` DATE NULL,
  `deleted_date` DATETIME NULL,
  `decision` VARCHAR(32) NOT NULL,
  `is_msi` TINYINT(1) NOT NULL DEFAULT 0,
  `repute_not_lost_reason` VARCHAR(4000) NULL,
  `unfitness_start_date` DATE NULL,
  `unfitness_end_date` DATE NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_tm_case_decision_ref_data1_idx` (`decision` ASC),
  INDEX `fk_tm_case_decision_user1_idx` (`created_by` ASC),
  INDEX `fk_tm_case_decision_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_tm_case_decision_cases1_idx` (`case_id` ASC),
  CONSTRAINT `fk_tm_case_decision_ref_data1`
    FOREIGN KEY (`decision`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tm_case_decision_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tm_case_decision_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tm_case_decision_cases1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `tm_case_decision_rehab`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `tm_case_decision_rehab` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `deleted_date` DATETIME NULL,
  `tm_case_decision_id` INT NOT NULL,
  `rehab_measure_id` VARCHAR(32) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_tm_case_decision_rehab_tm_case_decision1_idx` (`tm_case_decision_id` ASC),
  INDEX `fk_tm_case_decision_rehab_ref_data1_idx` (`rehab_measure_id` ASC),
  INDEX `fk_tm_case_decision_rehab_user1_idx` (`created_by` ASC),
  INDEX `fk_tm_case_decision_rehab_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_tm_case_decision_rehab_tm_case_decision1`
    FOREIGN KEY (`tm_case_decision_id`)
    REFERENCES `tm_case_decision` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tm_case_decision_rehab_ref_data1`
    FOREIGN KEY (`rehab_measure_id`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tm_case_decision_rehab_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tm_case_decision_rehab_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `tm_case_decision_unfitness`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `tm_case_decision_unfitness` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `deleted_date` DATETIME NULL,
  `tm_case_decision_id` INT NOT NULL,
  `unfitness_reason_id` VARCHAR(32) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_tm_case_decision_unfitness_tm_case_decision1_idx` (`tm_case_decision_id` ASC),
  INDEX `fk_tm_case_decision_unfitness_ref_data1_idx` (`unfitness_reason_id` ASC),
  INDEX `fk_tm_case_decision_unfitness_user1_idx` (`created_by` ASC),
  INDEX `fk_tm_case_decision_unfitness_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_tm_case_decision_unfitness_tm_case_decision1`
    FOREIGN KEY (`tm_case_decision_id`)
    REFERENCES `tm_case_decision` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tm_case_decision_unfitness_ref_data1`
    FOREIGN KEY (`unfitness_reason_id`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tm_case_decision_unfitness_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_tm_case_decision_unfitness_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `tm_grace_period`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `tm_grace_period` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `licence_id` INT NOT NULL,
  `is_active` TINYINT(1) NOT NULL DEFAULT 0,
  `start_date` DATE NOT NULL,
  `end_date` DATE NOT NULL,
  `action_date` DATETIME NOT NULL,
  `grace_period_no` INT NOT NULL DEFAULT 1,
  `assigned_to_user_id` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_transport_manager_grace_period_licence1_idx` (`licence_id` ASC),
  INDEX `fk_transport_manager_grace_period_user1_idx` (`assigned_to_user_id` ASC),
  INDEX `fk_transport_manager_grace_period_user2_idx` (`created_by` ASC),
  INDEX `fk_transport_manager_grace_period_user3_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_transport_manager_grace_period_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_transport_manager_grace_period_user1`
    FOREIGN KEY (`assigned_to_user_id`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_transport_manager_grace_period_user2`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_transport_manager_grace_period_user3`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `txc_inbox`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `txc_inbox` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `file_read` TINYINT(1) NULL,
  `bus_reg_id` INT NOT NULL,
  `local_authority_id` INT NULL,
  `organisation_id` INT NULL,
  `zip_document_id` INT NOT NULL,
  `route_document_id` INT NOT NULL,
  `pdf_document_id` INT NOT NULL,
  `route_seq` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_txc_inbox_bus_reg1_idx` (`bus_reg_id` ASC),
  INDEX `fk_txc_inbox_local_authority1_idx` (`local_authority_id` ASC),
  INDEX `fk_txc_inbox_organisation1_idx` (`organisation_id` ASC),
  INDEX `fk_txc_inbox_document1_idx` (`zip_document_id` ASC),
  INDEX `fk_txc_inbox_document2_idx` (`route_document_id` ASC),
  INDEX `fk_txc_inbox_document3_idx` (`pdf_document_id` ASC),
  INDEX `fk_txc_inbox_user1_idx` (`created_by` ASC),
  INDEX `fk_txc_inbox_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_txc_inbox_bus_reg1`
    FOREIGN KEY (`bus_reg_id`)
    REFERENCES `bus_reg` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_txc_inbox_local_authority1`
    FOREIGN KEY (`local_authority_id`)
    REFERENCES `local_authority` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_txc_inbox_organisation1`
    FOREIGN KEY (`organisation_id`)
    REFERENCES `organisation` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_txc_inbox_document1`
    FOREIGN KEY (`zip_document_id`)
    REFERENCES `document` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_txc_inbox_document2`
    FOREIGN KEY (`route_document_id`)
    REFERENCES `document` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_txc_inbox_document3`
    FOREIGN KEY (`pdf_document_id`)
    REFERENCES `document` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_txc_inbox_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_txc_inbox_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `void_disc`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `void_disc` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `goods_or_psv` VARCHAR(32) NOT NULL,
  `licence_type` VARCHAR(32) NOT NULL,
  `serial_start` INT NULL,
  `serial_end` INT NULL,
  `traffic_area_id` CHAR(3) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `fk_void_disc_ref_data1_idx` (`goods_or_psv` ASC),
  INDEX `fk_void_disc_ref_data2_idx` (`licence_type` ASC),
  INDEX `fk_void_disc_traffic_area1_idx` (`traffic_area_id` ASC),
  INDEX `fk_void_disc_user1_idx` (`created_by` ASC),
  INDEX `fk_void_disc_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_void_disc_ref_data1`
    FOREIGN KEY (`goods_or_psv`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_void_disc_ref_data2`
    FOREIGN KEY (`licence_type`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_void_disc_traffic_area1`
    FOREIGN KEY (`traffic_area_id`)
    REFERENCES `traffic_area` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_void_disc_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_void_disc_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `public_holiday`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `public_holiday` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `public_holiday_date` DATE NOT NULL,
  `is_england` TINYINT(1) NULL,
  `is_wales` TINYINT(1) NULL,
  `is_scotland` TINYINT(1) NULL,
  `is_ni` TINYINT(1) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_public_holiday_user1_idx` (`created_by` ASC),
  INDEX `fk_public_holiday_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_public_holiday_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_public_holiday_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `licence_vehicle_fee`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `licence_vehicle_fee` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `licence_vehicle_id` INT NOT NULL,
  `fee_id` INT NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_licence_vehicle_fee_fee1_idx` (`fee_id` ASC),
  INDEX `fk_licence_vehicle_fee_user1_idx` (`created_by` ASC),
  INDEX `fk_licence_vehicle_fee_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_licence_vehicle_fee_licence_vehicle1`
    FOREIGN KEY (`licence_vehicle_id`)
    REFERENCES `licence_vehicle` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_vehicle_fee_fee1`
    FOREIGN KEY (`fee_id`)
    REFERENCES `fee` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_vehicle_fee_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_licence_vehicle_fee_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `change_of_entity`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `change_of_entity` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `licence_id` INT NOT NULL,
  `old_licence_no` VARCHAR(45) NOT NULL,
  `old_organisation_name` VARCHAR(45) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  INDEX `fk_change_of_entity_licence1_idx` (`licence_id` ASC),
  INDEX `fk_change_of_entity_user1_idx` (`created_by` ASC),
  INDEX `fk_change_of_entity_user2_idx` (`last_modified_by` ASC),
  PRIMARY KEY (`id`),
  UNIQUE INDEX `licence_id_UNIQUE` (`licence_id` ASC),
  CONSTRAINT `fk_change_of_entity_licence1`
    FOREIGN KEY (`licence_id`)
    REFERENCES `licence` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_change_of_entity_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_change_of_entity_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `prohibition_defect`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `prohibition_defect` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `prohibition_id` INT NOT NULL,
  `notes` VARCHAR(4000) NULL,
  `defect_type` VARCHAR(255) NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_prohoibition_defect_prohibition1_idx` (`prohibition_id` ASC),
  INDEX `fk_prohoibition_defect_user1_idx` (`created_by` ASC),
  INDEX `fk_prohoibition_defect_user2_idx` (`last_modified_by` ASC),
  CONSTRAINT `fk_prohoibition_defect_prohibition1`
    FOREIGN KEY (`prohibition_id`)
    REFERENCES `prohibition` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_prohoibition_defect_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_prohoibition_defect_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `companies_house_request`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `companies_house_request` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `requested_on` DATETIME NULL,
  `request_type` VARCHAR(255) NULL,
  `request_error` VARCHAR(255) NULL,
  `ip_address` VARCHAR(255) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `penalty`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `penalty` (
  `id` INT NOT NULL AUTO_INCREMENT,
  `case_id` INT NOT NULL,
  `notes` LONGTEXT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  INDEX `fk_penalty_cases1_idx` (`case_id` ASC),
  INDEX `fk_penalty_user1_idx` (`created_by` ASC),
  INDEX `fk_penalty_user2_idx` (`last_modified_by` ASC),
  PRIMARY KEY (`id`),
  CONSTRAINT `fk_penalty_cases1`
    FOREIGN KEY (`case_id`)
    REFERENCES `cases` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_penalty_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_penalty_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `impounding_legislation_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `impounding_legislation_type` (
  `impounding_id` INT NOT NULL,
  `impounding_legislation_type_id` VARCHAR(32) NOT NULL,
  PRIMARY KEY (`impounding_id`, `impounding_legislation_type_id`),
  INDEX `fk_impounding_has_ref_data_ref_data1_idx` (`impounding_legislation_type_id` ASC),
  INDEX `fk_impounding_has_ref_data_impounding1_idx` (`impounding_id` ASC),
  CONSTRAINT `fk_impounding_has_ref_data_impounding1`
    FOREIGN KEY (`impounding_id`)
    REFERENCES `impounding` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_impounding_has_ref_data_ref_data1`
    FOREIGN KEY (`impounding_legislation_type_id`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pi_type`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `pi_type` (
  `pi_id` INT NOT NULL,
  `pi_type_id` VARCHAR(32) NOT NULL,
  INDEX `fk_pi_type_pi1_idx` (`pi_id` ASC),
  INDEX `fk_pi_type_ref_data1_idx` (`pi_type_id` ASC),
  PRIMARY KEY (`pi_id`, `pi_type_id`),
  CONSTRAINT `fk_pi_type_pi1`
    FOREIGN KEY (`pi_id`)
    REFERENCES `pi` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_type_ref_data1`
    FOREIGN KEY (`pi_type_id`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `decision`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `decision` (
  `id` INT NOT NULL,
  `goods_or_psv` VARCHAR(32) NOT NULL,
  `section_code` VARCHAR(50) NOT NULL,
  `description` VARCHAR(255) NOT NULL,
  `is_read_only` TINYINT(1) NOT NULL,
  `is_ni` tinyint(1) NOT NULL,
  `created_by` INT NULL,
  `last_modified_by` INT NULL,
  `created_on` DATETIME NULL,
  `last_modified_on` DATETIME NULL,
  `version` INT NOT NULL DEFAULT 1,
  PRIMARY KEY (`id`),
  INDEX `fk_decision_user1_idx` (`created_by` ASC),
  INDEX `fk_decision_user2_idx` (`last_modified_by` ASC),
  INDEX `fk_decision_ref_data1_idx` (`goods_or_psv` ASC),
  CONSTRAINT `fk_decision_user1`
    FOREIGN KEY (`created_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_decision_user2`
    FOREIGN KEY (`last_modified_by`)
    REFERENCES `user` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_decision_ref_data1`
    FOREIGN KEY (`goods_or_psv`)
    REFERENCES `ref_data` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pi_decision`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `pi_decision` (
  `pi_id` INT NOT NULL,
  `decision_id` INT NOT NULL,
  PRIMARY KEY (`pi_id`, `decision_id`),
  INDEX `fk_pi_has_decision_decision1_idx` (`decision_id` ASC),
  INDEX `fk_pi_has_decision_pi1_idx` (`pi_id` ASC),
  CONSTRAINT `fk_pi_has_decision_pi1`
    FOREIGN KEY (`pi_id`)
    REFERENCES `pi` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_has_decision_decision1`
    FOREIGN KEY (`decision_id`)
    REFERENCES `decision` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `pi_reason`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `pi_reason` (
  `pi_id` INT NOT NULL,
  `reason_id` INT NOT NULL,
  PRIMARY KEY (`pi_id`, `reason_id`),
  INDEX `fk_pi_has_reason_reason1_idx` (`reason_id` ASC),
  INDEX `fk_pi_has_reason_pi1_idx` (`pi_id` ASC),
  CONSTRAINT `fk_pi_has_reason_pi1`
    FOREIGN KEY (`pi_id`)
    REFERENCES `pi` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_pi_has_reason_reason1`
    FOREIGN KEY (`reason_id`)
    REFERENCES `reason` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;

CREATE TABLE `sla` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `category` varchar(32) DEFAULT '',
  `field` varchar(32) DEFAULT '',
  `compare_to` varchar(32) DEFAULT NULL,
  `days` int(5) DEFAULT NULL,
  `effective_from` date DEFAULT NULL,
  `effective_to` date DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
